#+TITLE: Hydra Menus
#+AUTHOR: Scimax VS Code Team
#+DATE: 2026-01-13
#+STARTUP: overview
#+OPTIONS: toc:2 num:t H:4
#+TODO: âš ï¸ ðŸ‘€ | âœ…

*Keybinding Note:* This extension uses Emacs-style keybindings where Ctrl is used on all platforms (not Cmd on Mac), except where explicitly noted. Mac alternatives are shown as Cmd where applicable.

* âœ… Introduction
CLOSED: [2026-01-16 Fri 07:36]

Hydra menus are a powerful keyboard-driven menu system inspired by Emacs hydra and transient packages. They provide quick access to Scimax commands through persistent, modal menus that remain open until you explicitly close them or execute an exit command.

** âœ… What Are Hydra Menus?
CLOSED: [2026-01-16 Fri 07:36]

A hydra menu is a quick pick interface that displays available commands organized into logical groups. Each command is associated with a single keyboard shortcut, allowing you to rapidly execute actions without navigating through multiple menus or remembering complex key combinations.

Think of hydra menus as command palettes optimized for keyboard efficiency:

- Single-key selection (no Enter needed)
- Commands stay organized in logical groups
- Menus can stay open for repeated actions
- Hierarchical navigation with submenus
- Visual indicators for toggles and persistent actions

** âœ… Key Features
CLOSED: [2026-01-16 Fri 07:37]

- Fast keyboard-driven navigation with single-key selection
- Organized command groups with descriptive labels and icons
- Persistent menus that stay open for repeated actions (red heads)
- Exit-after-action commands (blue heads)
- Submenu navigation for hierarchical organization
- Toggle indicators showing on/off state
- Conditional visibility based on context
- Customizable through VS Code settings
- Full integration with all Scimax features

** âœ… Philosophy
CLOSED: [2026-01-16 Fri 07:37]

The hydra system is designed around the principle of discoverability and efficiency. Instead of memorizing dozens of keyboard shortcuts, you can press `C-c m' to open the main menu and see all available commands with their shortcuts. Once you learn commonly-used shortcuts, you can invoke them directly without opening the menu.

* âœ… Getting Started
CLOSED: [2026-01-16 Fri 07:37]

** Opening the Main Menu

The fastest way to access hydra menus is through the main menu:

- Press `C-c m' to open the main Scimax menu
- Press `C-c C-m' for a context-aware menu based on the current file type

You can also open menus through the command palette:

1. Press `C/cmd-S-P' 
2. Type "Scimax: Main Menu" or "Scimax: Show Hydra Menu"
3. Press Enter

** âœ… Basic Navigation
CLOSED: [2026-01-16 Fri 07:39]

When a hydra menu is open:

1. Press a single key to execute the corresponding command
2. Type multiple characters to filter the list
3. Use arrow keys to navigate
4. Press Enter to execute the selected command
5. Press Escape to close, or select "Back" to return to parent menu

** âœ… Understanding Exit Behaviors
CLOSED: [2026-01-17 Sat 19:52]

Each menu item has one of three exit behaviors, indicated by icons in the interface.

Note: The terms "Blue Head" and "Red Head" come from Emacs Hydra, which uses colored text. VS Code's QuickPick API doesn't support per-item colors, so we use icons instead.

*** âœ… Exit (Blue Head) - $(sign-out)
CLOSED: [2026-01-17 Sat 12:13]

The menu closes after executing the command. Most commands use this behavior. These items are marked with a $(sign-out) icon (exit door).

#+begin_example
[t] Today $(sign-out)           â†’ Opens today's journal and closes menu
[s] Search $(sign-out)          â†’ Starts search and closes menu
#+end_example

*** âœ… Stay (Red Head) - $(sync)
CLOSED: [2026-01-17 Sat 12:15]

The menu remains open after executing the command, allowing you to execute it multiple times or try different commands. These items are marked with a $(sync) icon (circular arrows).

#+begin_example
[r] Refresh $(sync)             â†’ Refreshes data and keeps menu open
[i] Index File $(sync)          â†’ Indexes file and keeps menu open
#+end_example

*** âœ… Submenu - $(chevron-right)
CLOSED: [2026-01-17 Sat 12:14]

Navigates to a child menu. These items are marked with a $(chevron-right) icon (arrow).

#+begin_example
[j] Journal $(chevron-right)    â†’ Opens journal submenu
[r] References $(chevron-right) â†’ Opens references submenu
#+end_example

* âœ… Available Hydras
CLOSED: [2026-01-16 Fri 07:42]

Scimax comes with eight pre-built hydra menus covering all major features:

** âœ… Main Menu (scimax.main)
CLOSED: [2026-01-16 Fri 07:42]

The main entry point for all Scimax features.

*Access*: `C-c m' or command `Scimax: Main Menu'

#+begin_example
Scimax

Features:
  [j] Journal       - Date-based journaling
  [r] References    - Bibliography management
  [n] Notebook      - Project notebooks
  [p] Projects      - Project switching (projectile)

Search & Navigation:
  [s] Search        - Search across files
  [g] Jump (Avy)    - Quick navigation

Database:
  [d] Database      - Org database operations
#+end_example

** âœ… Journal Menu (scimax.journal)
CLOSED: [2026-01-17 Sat 12:15]

Date-based journaling commands for creating and navigating entries.

*Parent*: Main Menu

#+begin_example
Journal

Open Entry:
  [t] Today           - Open today's journal entry
  [y] Yesterday       - Open yesterday's entry
  [w] Tomorrow        - Open tomorrow's entry
  [g] Go to Date      - Open entry for specific date

Navigation:
  [p] Previous Entry  - Navigate to previous entry
  [n] Next Entry      - Navigate to next entry
  [v] Week View       - View entries for the week

Create & Search:
  [c] New Entry       - Create new entry with template
  [s] Search          - Search journal entries

Insert:
  [h] Insert Heading  - Insert timestamped heading
#+end_example

*Example Usage*:

1. Press C-c m to open main menu
2. Press j to open journal menu
3. Press t to open today's entry

** âœ… References Menu (scimax.references)
CLOSED: [2026-01-17 Sat 12:15]

Bibliography and citation management powered by org-ref.

*Parent*: Main Menu

#+begin_example
References

Citations:
  [c] Insert Citation - Search and insert a citation
  [o] Open Entry      - Open a bibliography entry
  [u] Open URL        - Open URL for reference

Add References:
  [d] Fetch from DOI    - Add entry from DOI
  [b] Fetch from BibTeX - Add entry from BibTeX string
  [n] New Entry         - Create new bibliography entry

Search:
  [s] Search References - Search bibliography
  [w] Citing Works      - Find works citing this reference
  [r] Related Works     - Find related works

Citation Actions:
  [a] Citation Actions  - Actions for citation at point

Management:
  [l] Reload Bibliography - Reload all bibliography files
#+end_example

*Example Usage*:

1. Press C-c M, then r to open references menu
2. Press c to insert a citation
3. Search for your reference and select it

** âœ… Notebook Menu (scimax.notebook)
CLOSED: [2026-01-17 Sat 12:15]

Project-based organization for scientific computing.

*Parent*: Main Menu

#+begin_example
Notebook

Navigation:
  [o] Open Notebook   - Open an existing notebook
  [l] List Notebooks  - Show all notebooks

Create:
  [n] New Notebook  - Create a new notebook
  [e] New Entry     - Add entry to current notebook

Search:
  [s] Search Notebook - Search within current notebook

Files:
  [f] Open File      - Open file from notebook
  [r] Recent Files   - Show recent notebook files
#+end_example

*Example Usage*:

1. Press C-c M, then n to open notebook menu
2. Press n to create a new notebook
3. Enter notebook name and location

** âœ… Projectile Menu (scimax.projectile)
CLOSED: [2026-01-17 Sat 12:15]

Project management and switching inspired by Emacs projectile.

*Parent*: Main Menu

#+begin_example
Projects (Projectile)

Switch:
  [p] Switch Project  - Switch to another project

Manage:
  [a] Add Project       - Add current folder as project
  [r] Remove Project    - Remove a project from list
  [s] Scan for Projects - Scan directories for projects

Files:
  [f] Find File         - Find file in project
  [g] Search in Project - Search text in project
#+end_example

*Example Usage*:

1. Press C-c M, then p to open projectile menu
2. Press p again to switch to another project
3. Select project from the list

** âœ… Search Menu (scimax.search)
CLOSED: [2026-01-17 Sat 12:15]

Comprehensive search across files and content.

*Parent*: Main Menu

#+begin_example
Search

Fuzzy Search:
  [f] Search Current File - Fuzzy search in current file
  [o] Search Open Files   - Search across all open files
  [h] Search Headings     - Search headings in current file

Database Search:
  [s] Full-text Search  - Search all indexed content
  [v] Vector Search     - Semantic similarity search

Tasks & Agenda:
  [t] Search TODOs  - Find TODO items
  [a] Agenda        - View agenda items
#+end_example

*Example Usage*:

1. Press C-c M, then s to open search menu
2. Press f to search current file
3. Type your search query

** âœ… Jump Menu (scimax.jump)
CLOSED: [2026-01-17 Sat 12:15]

Avy-style quick navigation for jumping to visible text.

*Parent*: Main Menu

#+begin_example
Jump (Avy)

Jump to Character:
  [c] Jump to Char    - Jump to a character
  [2] Jump to 2 Chars - Jump to two characters

Jump to Word:
  [w] Jump to Word - Jump to start of word

Jump to Line:
  [l] Jump to Line  - Jump to a line
  [a] Jump Above    - Jump to line above cursor
  [b] Jump Below    - Jump to line below cursor
#+end_example

*Example Usage*:

1. Press C-c M, then g to open jump menu
2. Press w to jump to a word
3. Type the first letter of target word
4. Type the hint character shown at that location

** âœ… Database Menu (scimax.database)
CLOSED: [2026-01-17 Sat 12:15]

Org database operations including search and indexing.

*Parent*: Main Menu

#+begin_example
Database

Search:
  [s] Full-text Search  - Search all content
  [v] Vector Search     - Semantic similarity search
  [h] Search Headings   - Search by heading text

Tasks:
  [t] Search TODOs  - Find TODO items
  [a] Agenda        - View scheduled items

Links:
  [l] Search Links  - Find org links
  [b] Backlinks     - Find backlinks to current file

Index:
  [i] Index Current File  - Re-index the current file
  [I] Index All Files     - Re-index all files

Statistics:
  [S] Database Stats  - Show database statistics
#+end_example

*Example Usage*:

1. Press C-c M, then d to open database menu
2. Press s to perform full-text search
3. Enter your search query

* âœ… Commands and Keybindings
CLOSED: [2026-01-17 Sat 12:15]

** âœ… Global Keybindings
CLOSED: [2026-01-17 Sat 12:15]

| Keybinding | Command                  | Description             |
|------------+--------------------------+-------------------------|
| C-c m      | scimax.hydra.main        | Open main menu          |
| C-c C-m    | scimax.hydra.contextMenu | Open context-aware menu |

[[cmd:scimax.hydra.main][C-c m]] opens the main hydra menu, while [[cmd:scimax.hydra.contextMenu][C-c C-m]] opens a menu tailored to the current file type.

** âœ… Available Commands
CLOSED: [2026-01-17 Sat 12:16]

All hydra commands can be invoked through the command palette (Cmd/C-S-P):

*** âœ… scimax.hydra.show
CLOSED: [2026-01-17 Sat 12:16]

Show a specific hydra menu by ID. If no ID is provided, shows a picker to select from available menus.

#+begin_src typescript
// Show main menu
await vscode.commands.executeCommand('scimax.hydra.show', 'scimax.main');

// Show menu picker
await vscode.commands.executeCommand('scimax.hydra.show');
#+end_src

*** âœ… scimax.hydra.hide
CLOSED: [2026-01-17 Sat 12:16]

Hide the currently visible hydra menu.

*** âœ… scimax.hydra.back
CLOSED: [2026-01-17 Sat 12:16]

Navigate back to the parent menu. If there's no parent, closes the menu.

*** âœ… scimax.hydra.main
CLOSED: [2026-01-17 Sat 12:17]

Open the main Scimax menu (scimax.main).

*** âœ… scimax.hydra.contextMenu
CLOSED: [2026-01-17 Sat 12:17]

Open a context-aware menu based on the current file type. Falls back to the main menu if no language-specific menu exists.

*** âœ… scimax.hydra.toggle
CLOSED: [2026-01-17 Sat 12:17]

Toggle visibility of a specific menu.

#+begin_src typescript
await vscode.commands.executeCommand('scimax.hydra.toggle', 'scimax.journal');
#+end_src

* âœ… Configuration
CLOSED: [2026-01-17 Sat 12:17]

** âœ… Settings
CLOSED: [2026-01-17 Sat 12:17]

Configure hydra behavior through VS Code settings (File > Preferences > Settings or Cmd/C-,):

*** âœ… scimax.hydra.showKeyHints
CLOSED: [2026-01-17 Sat 12:17]

Show keyboard shortcuts inline with menu items.

- Type: boolean
- Default: true

When enabled, shows shortcuts like [t] before each menu item:

#+begin_example
[t] Today           - With key hints
Today               - Without key hints
#+end_example

#+begin_src json
{
  "scimax.hydra.showKeyHints": true
}
#+end_src

*** âœ… scimax.hydra.singleKeySelection
CLOSED: [2026-01-17 Sat 12:17]

Select menu items with a single keypress (no Enter needed).

- Type: boolean
- Default: true

When enabled, pressing a key immediately executes the command. When disabled, you must press Enter after selecting.

#+begin_src json
{
  "scimax.hydra.singleKeySelection": true
}
#+end_src

*** âœ… scimax.hydra.dimNonMatching
CLOSED: [2026-01-17 Sat 12:17]

Dim menu items that don't match the current filter.

- Type: boolean
- Default: true

When typing to filter, non-matching items are dimmed rather than hidden.

#+begin_src json
{
  "scimax.hydra.dimNonMatching": true
}
#+end_src

*** âœ… scimax.hydra.sortByKey
CLOSED: [2026-01-17 Sat 12:17]

Sort menu items by their keyboard shortcut instead of definition order.

- Type: boolean
- Default: false

When enabled, items are alphabetically sorted by key (a, b, c...) rather than their logical grouping.

#+begin_src json
{
  "scimax.hydra.sortByKey": false
}
#+end_src

** âœ… Example Configuration
CLOSED: [2026-01-17 Sat 12:17]

A complete hydra configuration might look like:

#+begin_src json
{
  "scimax.hydra.showKeyHints": true,
  "scimax.hydra.singleKeySelection": true,
  "scimax.hydra.dimNonMatching": true,
  "scimax.hydra.sortByKey": false
}
#+end_src

* âœ… Creating Custom Hydras
CLOSED: [2026-01-17 Sat 12:17]

You can create custom hydra menus programmatically in extension code or through configuration.

** âœ… Menu Structure
CLOSED: [2026-01-17 Sat 12:17]

A hydra menu definition consists of:

- Unique ID
- Title and optional hint text
- Groups of menu items
- Optional parent menu for hierarchical navigation
- Optional lifecycle hooks

** âœ… Using the Fluent Builder API
CLOSED: [2026-01-17 Sat 12:17]

The easiest way to create a custom menu is with the fluent builder:

#+begin_src typescript
import { HydraManager } from './hydra';

// Get the hydra manager instance
const hydraManager = getHydraManager();

// Build a custom menu
const menu = hydraManager.createMenuBuilder('my.custom.menu')
    .title('My Custom Menu')
    .hint('Press a key to select an action')
    .command('a', 'Action A', 'my.command.a')
    .persistentCommand('r', 'Refresh', 'my.command.refresh')
    .submenu('s', 'Settings', 'my.settings.menu')
    .parent('scimax.main')
    .build();

// Register the menu
hydraManager.registerMenu(menu);
#+end_src

** âœ… Menu Item Types
CLOSED: [2026-01-17 Sat 12:17]

*** âœ… Exit Commands (Blue Heads)
CLOSED: [2026-01-17 Sat 12:17]

Close the menu after executing:

#+begin_src typescript
.command('t', 'Today', 'scimax.journal.today')
#+end_src

*** âœ… Persistent Commands (Red Heads)
CLOSED: [2026-01-17 Sat 12:17]

Keep the menu open after executing:

#+begin_src typescript
.persistentCommand('r', 'Refresh', 'my.refresh.command')
#+end_src

*** âœ… Submenu Links
CLOSED: [2026-01-17 Sat 12:17]

Navigate to a child menu:

#+begin_src typescript
.submenu('j', 'Journal', 'scimax.journal')
#+end_src

** âœ… Manual Menu Definition
CLOSED: [2026-01-17 Sat 12:17]

For more control, you can define menus manually:

#+begin_src typescript
import { HydraMenuDefinition } from './hydra/types';

const customMenu: HydraMenuDefinition = {
    id: 'my.custom',
    title: 'Custom Menu',
    hint: 'My custom commands',
    parent: 'scimax.main',
    groups: [
        {
            title: 'Actions',
            items: [
                {
                    key: 'a',
                    label: 'Action A',
                    description: 'Performs action A',
                    icon: 'zap',
                    exit: 'exit',
                    action: 'my.command.a'
                },
                {
                    key: 'b',
                    label: 'Action B',
                    exit: 'stay',
                    action: async () => {
                        // Custom async function
                        await performActionB();
                    }
                }
            ]
        },
        {
            title: 'Navigation',
            items: [
                {
                    key: 's',
                    label: 'Settings',
                    exit: 'submenu',
                    action: 'my.settings.menu'
                }
            ]
        }
    ]
};

hydraManager.registerMenu(customMenu);
#+end_src

** âœ… Advanced Features
CLOSED: [2026-01-17 Sat 12:17]

*** âœ… Conditional Visibility
CLOSED: [2026-01-17 Sat 12:17]

Show items only when certain conditions are met:

#+begin_src typescript
{
    key: 'x',
    label: 'Advanced Feature',
    exit: 'exit',
    action: 'my.advanced.command',
    when: () => {
        const config = vscode.workspace.getConfiguration('myext');
        return config.get('enableAdvanced', false);
    }
}
#+end_src

*** âœ… Toggle Items
CLOSED: [2026-01-17 Sat 12:17]

Display on/off state for toggle commands:

#+begin_src typescript
{
    key: 't',
    label: 'Auto Save',
    exit: 'stay',
    action: 'my.toggle.autosave',
    isToggle: true,
    getToggleState: async () => {
        const config = vscode.workspace.getConfiguration('myext');
        return config.get('autoSave', false);
    }
}
#+end_src

Toggle items display $(check) when on and $(circle-outline) when off.

*** âœ… Lifecycle Hooks
CLOSED: [2026-01-17 Sat 12:17]

Execute code when menus are shown or hidden:

#+begin_src typescript
const menu: HydraMenuDefinition = {
    id: 'my.menu',
    title: 'My Menu',
    groups: [],
    onShow: async () => {
        console.log('Menu opened');
        await refreshData();
    },
    onHide: async () => {
        console.log('Menu closed');
        await cleanup();
    }
};
#+end_src

** âœ… Registering Multiple Menus
CLOSED: [2026-01-17 Sat 12:18]

Register several menus at once:

#+begin_src typescript
const menus = [menu1, menu2, menu3];
hydraManager.registerMenus(menus);
#+end_src

** âœ… Unregistering Menus
CLOSED: [2026-01-17 Sat 12:18]

Remove a menu from the registry:

#+begin_src typescript
hydraManager.unregisterMenu('my.custom.menu');
#+end_src

* âœ… Practical Examples
CLOSED: [2026-01-17 Sat 12:18]

** âœ… Example 1: Opening Today's Journal
CLOSED: [2026-01-17 Sat 12:18]

The quickest way to open today's journal entry:

1. Press C-c m â†’ opens main menu
2. Press j â†’ opens journal submenu
3. Press t â†’ opens today's entry and closes menu

Or, if you remember the keybinding, press C-S-J directly.

** âœ… Example 2: Inserting a Citation
CLOSED: [2026-01-17 Sat 12:18]

To insert a citation in your document:

1. Position cursor where you want the citation
2. Press C-c m â†’ opens main menu
3. Press r â†’ opens references submenu
4. Press c â†’ starts citation insertion
5. Type to search for your reference
6. Select the reference to insert it

** âœ… Example 3: Quick Navigation with Jump
CLOSED: [2026-01-17 Sat 12:18]

To jump to a visible word on screen:

1. Press C-c m â†’ opens main menu
2. Press g â†’ opens jump submenu
3. Press w â†’ starts word jump mode
4. Type first letter of target word
5. Type the hint character shown at target location
6. Cursor jumps to that word

** âœ… Example 4: Searching TODO Items
CLOSED: [2026-01-17 Sat 12:18]

To find all TODO items in your org files:

1. Press C-c m â†’ opens main menu
2. Press s â†’ opens search submenu
3. Press t â†’ searches for TODO items
4. View results in quick pick
5. Select an item to navigate to it

** âœ… Example 5: Navigating Back
CLOSED: [2026-01-17 Sat 19:50]

When in a submenu:

1. Press C-c m â†’ main menu
2. Press d â†’ database menu
3. Select "Back" at the top of the menu â†’ returns to main menu
4. Press Escape â†’ closes all menus

* âœ… Differences from Emacs Hydra
CLOSED: [2026-01-17 Sat 12:19]

While inspired by Emacs hydra, the VS Code implementation has some differences due to platform constraints and design choices:

** âœ… Similarities
CLOSED: [2026-01-17 Sat 12:19]

- Keyboard-driven navigation with single-key selection
- Persistent menus that stay open for repeated actions
- Exit vs. stay behavior (blue vs. red heads)
- Hierarchical menu organization
- Visual indicators and hints

** âœ… Differences
CLOSED: [2026-01-17 Sat 12:19]

*** âœ… Quick Pick vs. Minibuffer
CLOSED: [2026-01-17 Sat 12:19]

VS Code uses the native quick pick interface instead of Emacs's minibuffer. This provides:

- Native VS Code look and feel
- Fuzzy filtering built-in
- Mouse support (if desired)
- Icon support
- Better accessibility

*** âœ… No Dedicated Hydra Mode
CLOSED: [2026-01-17 Sat 12:20]

VS Code doesn't have a dedicated "hydra mode" like Emacs. Hydras appear as quick picks that temporarily take focus but don't create a new modal mode.

*** âœ… Async Command Execution
CLOSED: [2026-01-17 Sat 12:20]

Commands execute asynchronously and can return Promises, supporting VS Code's async command pattern.

*** Icon-Based Indicators Instead of Colors

Unlike Emacs hydra which uses colored text (blue for exit, red for stay), VS Code's QuickPick API doesn't support per-item color customization. Instead, we use codicons to indicate behavior:

| Behavior   | Icon              | Meaning                            |
|------------+-------------------+------------------------------------|
| Exit       | $(sign-out)       | Menu closes after command executes |
| Stay       | $(sync)           | Menu stays open after command      |
| Submenu    | $(chevron-right)  | Navigates to a child menu          |
| Toggle On  | $(check)          | Toggle is currently enabled        |
| Toggle Off | $(circle-outline) | Toggle is currently disabled       |

The overall color theme follows VS Code's active color theme.

*** âœ… Menu State Persistence
CLOSED: [2026-01-17 Sat 12:20]

The hydra state is not persisted across VS Code restarts. Each session starts fresh.

*** âœ… Configuration Through Settings
CLOSED: [2026-01-17 Sat 12:20]

Configuration uses VS Code's settings system (JSON) rather than Emacs Lisp variables.

*** âœ… No Posframe Support
CLOSED: [2026-01-17 Sat 12:20]

Menus don't appear at specific screen positions like Emacs posframe. They always appear in the standard quick pick location (top center).

** âœ… Migration Tips
CLOSED: [2026-01-17 Sat 12:20]

If you're coming from Emacs hydra:

1. *Keybindings*: Map C-c m (or your preferred binding) to scimax.hydra.main
2. *Menu Definition*: Use the fluent builder API for a declarative style similar to Emacs
3. *Exit Behavior*: exit ` blue head, stay ' red head
4. *Submenus*: Use the submenu exit behavior instead of (exit) with another hydra call
5. *Hooks*: Use onShow and onHide instead of :before-exit and :after-exit

* âœ… Tips and Best Practices
CLOSED: [2026-01-17 Sat 12:20]

** âœ… Discoverability
CLOSED: [2026-01-17 Sat 12:20]

- Keep menus organized in logical groups
- Use descriptive labels and helpful descriptions
- Add icons to make items visually distinct
- Use consistent key assignments (e.g., s for search, n for new)

** âœ… Performance
CLOSED: [2026-01-17 Sat 12:20]

- Use conditional visibility (when) to hide irrelevant items
- Don't create too many nested submenus (2-3 levels max)
- Keep async actions fast to avoid blocking the UI
- Use persistent commands (stay) for repeated actions

** âœ… Keyboard Shortcuts
CLOSED: [2026-01-17 Sat 12:20]

- Assign memorable single-letter keys
- Use uppercase for destructive or advanced operations
- Group related commands under similar keys across menus
- Reserve common keys (q for quit, ? for help, b for back)

** âœ… User Experience
CLOSED: [2026-01-17 Sat 12:20]

- Provide clear hints in menu titles
- Show toggle state for boolean options
- Use submenus to reduce cognitive load
- Test both keyboard and mouse interaction
- Ensure menus work in all relevant contexts

** âœ… Debugging
CLOSED: [2026-01-17 Sat 12:20]

To debug custom menus:

1. Open the Developer Console (Help > Toggle Developer Tools)
2. Set breakpoints in menu actions
3. Use console.log in onShow and onHide hooks
4. Check for errors in command execution
5. Verify menu registration with hydraManager.getMenuIds()

* âœ… Troubleshooting
CLOSED: [2026-01-17 Sat 12:20]

** âœ… Menu Not Appearing
CLOSED: [2026-01-17 Sat 12:20]

- Verify the menu is registered: Check hydraManager.getMenuIds()
- Ensure the menu ID is correct
- Check for errors in the Developer Console
- Verify keybindings are not conflicting

** âœ… Commands Not Executing
CLOSED: [2026-01-17 Sat 12:20]

- Verify the command is registered in VS Code
- Check command arguments are correct
- Look for errors in the Developer Console
- Test the command directly from command palette

** âœ… Items Not Showing
CLOSED: [2026-01-17 Sat 12:20]

- Check the when condition if present
- Verify group visibility conditions
- Ensure items are not filtered by current search
- Check that sortByKey setting isn't hiding items

** âœ… Single-Key Selection Not Working
CLOSED: [2026-01-17 Sat 12:20]

- Verify scimax.hydra.singleKeySelection is true
- Check for key conflicts with other extensions
- Ensure the hydra menu has focus
- Try pressing keys slowly (avoid double-press)

** âœ… Submenus Not Navigating
CLOSED: [2026-01-17 Sat 12:20]

- Verify submenu ID exists and is registered
- Check exit is set to 'submenu'
- Ensure action contains the submenu ID string
- Verify parent menu is properly configured

* âœ… Frequently Asked Questions
CLOSED: [2026-01-17 Sat 12:20]

** âœ… Can I create hydras for non-Scimax commands?
CLOSED: [2026-01-17 Sat 12:20]

Yes! You can create hydras that execute any VS Code command, including those from other extensions.

** âœ… How do I add a hydra to the command palette?
CLOSED: [2026-01-17 Sat 12:20]

Hydra commands like scimax.hydra.show are automatically available in the command palette. To show a specific menu, register it first, then call:

#+begin_src typescript
await vscode.commands.executeCommand('scimax.hydra.show', 'your.menu.id');
#+end_src

** âœ… Can I bind a hydra to a custom keybinding?
CLOSED: [2026-01-17 Sat 12:20]

Yes! Add a keybinding in keybindings.json:

#+begin_src json
{
  "key": "ctrl+alt+h",
  "command": "scimax.hydra.show",
  "args": "my.custom.menu"
}
#+end_src

** âœ… How do I share custom hydras with my team?
CLOSED: [2026-01-17 Sat 12:20]

Custom hydras defined in extension code are automatically shared. For configuration-based hydras, share your workspace .vscode/settings.json file.

** âœ… Can hydras work with multiple workspaces?
CLOSED: [2026-01-17 Sat 12:20]

Yes! Hydras are global to the VS Code window and work across all workspace folders.

** âœ… How do I disable hydras?
CLOSED: [2026-01-17 Sat 12:20]

Unmap the keybindings in your keybindings.json:

#+begin_src json
{
  "key": "ctrl+c m",
  "command": "-scimax.hydra.main"
}
#+end_src

The hydras remain available through the command palette.

* âœ… Additional Resources
CLOSED: [2026-01-17 Sat 12:20]

** âœ… Source Code
CLOSED: [2026-01-17 Sat 12:20]

The hydra framework source is located in src/hydra/:

- src/hydra/types.ts - Type definitions
- src/hydra/hydraManager.ts - Core manager implementation
- src/hydra/commands.ts - Command registrations
- src/hydra/menus/ - Pre-built menu definitions

** âœ… Related Documentation
CLOSED: [2026-01-17 Sat 12:20]

- [[file:24-keybindings.org][Keybindings]] - All Scimax keyboard shortcuts
- [[file:26-configuration.org][Configuration]] - Complete settings reference
- [[file:14-journal.org][Journal]] - Journal-specific commands and workflows
- [[file:19-references.org][References]] - Bibliography management
- [[file:18-database-search.org][Database Search]] - Search and query system

** âœ… External References
CLOSED: [2026-01-17 Sat 12:20]

- [[https://github.com/abo-abo/hydra][Emacs Hydra Package]] - Original inspiration
- [[https://github.com/magit/transient][Emacs Transient Package]] - Alternative approach
- [[https://code.visualstudio.com/api/references/vscode-api#QuickPick][VS Code QuickPick API]] - Underlying implementation

* âœ… Conclusion
CLOSED: [2026-01-17 Sat 12:20]

Hydra menus provide a powerful and discoverable way to access Scimax features. Whether you're a new user exploring available commands or an experienced user building custom workflows, hydras help you work efficiently without memorizing dozens of keyboard shortcuts.

Start with C-c m to open the main menu and explore. Over time, you'll develop muscle memory for frequently-used commands and can invoke them directly or through submenus.

Happy hydra-ing!

* âœ… Navigation
CLOSED: [2026-01-17 Sat 19:51]

- Previous: [[file:21-navigation.org][Navigation]]
- Index: [[file:00-index.org][Documentation Index]]
- Next: [[file:23-speed-commands.org][Speed Commands]]
