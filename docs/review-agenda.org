#+TITLE: Documentation Review Agenda
#+AUTHOR: Scimax VSCode
#+TODO: âš ï¸ ðŸ‘€ | âœ…

This file generates a dynamic agenda of documentation headings that need review.
Headings marked with âš ï¸ are new and need inspection before being marked âœ….

* Generate Review Agenda

Run this block (C-c C-c) to generate the current review agenda from docs/*.org files.

#+begin_src sh 

echo "* Review Agenda"
echo ""

total=0
for file in *.org; do
    [ "$file" = "review-agenda.org" ] && continue

    # Find lines with âš ï¸ or ðŸ‘€ headings
    matches=$(grep -n "^\*.*âš ï¸\|^\*.*ðŸ‘€" "$file" 2>/dev/null || true)

    if [ -n "$matches" ]; then
        count=$(echo "$matches" | wc -l | tr -d ' ')
        total=$((total + count))
        echo "** [[file:$file][$file]] ($count items)"
        echo "$matches" | while IFS=: read -r linenum content; do
            # Extract the heading title (remove stars and TODO keyword)
            title=$(echo "$content" | sed 's/^\*\+ //' | sed 's/^âš ï¸ //' | sed 's/^ðŸ‘€ //')
            echo "   - [[file:$file::$linenum][$title]]"
        done
        echo ""
    fi
done

if [ "$total" -eq 0 ]; then
    echo "No items marked with âš ï¸ or ðŸ‘€ found. All documentation reviewed!"
else
    echo "Total: $total items need review"
fi
#+end_src

#+RESULTS:
: * Review Agenda
: 
: ** [[file:01-getting-started.org][01-getting-started.org]] (1 items)
:    - [[file:01-getting-s1tarted.org::249][** ðŸ‘€ Help Commands]]
: 
: ** [[file:02-document-structure.org][02-document-structure.org]] (3 items)
:    - [[file:02-document-structure.org::278][** âš ï¸ Startup Keyword]]
:    - [[file:02-document-structure.org::288][** âš ï¸ Property Keyword]]
:    - [[file:02-document-structure.org::337][** âš ï¸ Inherited Properties]]
: 
: ** [[file:03-todo-items.org][03-todo-items.org]] (2 items)
:    - [[file:03-todo-items.org::116][***** âš ï¸ Task 1]]
:    - [[file:03-todo-items.org::117][***** ðŸ‘€ Task 2]]
: 
: ** [[file:04-tables.org][04-tables.org]] (4 items)
:    - [[file:04-tables.org::297][*** âš ï¸ Percentage Calculation]]
:    - [[file:04-tables.org::385][** ðŸ‘€ HTML Export]]
:    - [[file:04-tables.org::389][** ðŸ‘€ LaTeX Export]]
:    - [[file:04-tables.org::402][** ðŸ‘€ Markdown Export]]
: 
: ** [[file:05-links.org][05-links.org]] (4 items)
:    - [[file:05-links.org::242][** ðŸ‘€ Basic File Links]]
:    - [[file:05-links.org::300][** âš ï¸ Image Links]]
:    - [[file:05-links.org::389][** âš ï¸ Finding Broken Links]]
:    - [[file:05-links.org::395][** âš ï¸ Updating Links]]
: 
: ** [[file:06-timestamps.org][06-timestamps.org]] (13 items)
:    - [[file:06-timestamps.org::765][** âš ï¸ Diary Sexp Syntax]]
:    - [[file:06-timestamps.org::788][*** âš ï¸ Annual Events (Birthdays, Anniversaries)]]
:    - [[file:06-timestamps.org::798][*** âš ï¸ Floating Holidays]]
:    - [[file:06-timestamps.org::814][*** âš ï¸ Class Schedules]]
:    - [[file:06-timestamps.org::824][*** âš ï¸ Cyclic Events]]
:    - [[file:06-timestamps.org::834][*** âš ï¸ Block Dates (Date Ranges)]]
:    - [[file:06-timestamps.org::842][** âš ï¸ When to Use Diary Sexps]]
:    - [[file:06-timestamps.org::855][** âš ï¸ CLOSED with Other Timestamps]]
:    - [[file:06-timestamps.org::973][** âš ï¸ Project with Multiple Timestamps]]
:    - [[file:06-timestamps.org::990][** âš ï¸ Recurring Maintenance Task]]
:    - [[file:06-timestamps.org::999][** âš ï¸ Event with Time Range]]
:    - [[file:06-timestamps.org::1008][** âš ï¸ Multi-day Event]]
:    - [[file:06-timestamps.org::1017][** âš ï¸ Task with Complete History]]
: 
: ** [[file:07-source-blocks.org][07-source-blocks.org]] (5 items)
:    - [[file:07-source-blocks.org::513][*** ðŸ‘€ :eval - Control Evaluation]]
:    - [[file:07-source-blocks.org::641][*** âš ï¸ File Links]]
:    - [[file:07-source-blocks.org::1063][*** âš ï¸ With Headers]]
:    - [[file:07-source-blocks.org::1501][*** âš ï¸ Plot Generation]]
:    - [[file:07-source-blocks.org::1623][* ðŸ‘€ Navigation]]
: 
: ** [[file:09-jupyter.org][09-jupyter.org]] (1 items)
:    - [[file:09-jupyter.org::1425][* ðŸ‘€ Navigation]]
: 
: ** [[file:10-export.org][10-export.org]] (1 items)
:    - [[file:10-export.org::414][*** âš ï¸ Body-Only]]
: 
: ** [[file:12-image-overlays.org][12-image-overlays.org]] (1 items)
:    - [[file:12-image-overlays.org::146][** âš ï¸ Adding Captions]]
: 
: ** [[file:13-agenda.org][13-agenda.org]] (31 items)
:    - [[file:13-agenda.org::257][** âš ï¸ Upcoming Deadlines]]
:    - [[file:13-agenda.org::285][** âš ï¸ Warning Periods]]
:    - [[file:13-agenda.org::296][* âš ï¸ Scheduled Item View]]
:    - [[file:13-agenda.org::315][** âš ï¸ Repeating Items]]
:    - [[file:13-agenda.org::332][* âš ï¸ Grouping and Sorting]]
:    - [[file:13-agenda.org::336][** âš ï¸ Group By Options]]
:    - [[file:13-agenda.org::338][*** âš ï¸ By Date (Default)]]
:    - [[file:13-agenda.org::352][*** âš ï¸ By Category]]
:    - [[file:13-agenda.org::366][*** âš ï¸ By Priority]]
:    - [[file:13-agenda.org::400][** âš ï¸ Changing Grouping]]
:    - [[file:13-agenda.org::410][** âš ï¸ Sort Options]]
:    - [[file:13-agenda.org::425][** âš ï¸ Filter by Tag]]
:    - [[file:13-agenda.org::498][** âš ï¸ Tree View Interface]]
:    - [[file:13-agenda.org::514][** âš ï¸ Opening Items]]
:    - [[file:13-agenda.org::523][** âš ï¸ Quick Pick Navigation]]
:    - [[file:13-agenda.org::543][** âš ï¸ Item Icons]]
:    - [[file:13-agenda.org::1082][* âš ï¸ Troubleshooting]]
:    - [[file:13-agenda.org::1084][** âš ï¸ Agenda Shows No Items]]
:    - [[file:13-agenda.org::1113][** âš ï¸ Items Not Updating]]
:    - [[file:13-agenda.org::1137][** âš ï¸ Tree View Not Showing]]
:    - [[file:13-agenda.org::1155][** âš ï¸ Slow Performance]]
:    - [[file:13-agenda.org::1184][** âš ï¸ Date Display Issues]]
:    - [[file:13-agenda.org::1209][* âš ï¸ Quick Reference]]
:    - [[file:13-agenda.org::1211][** âš ï¸ Main Agenda Commands]]
:    - [[file:13-agenda.org::1227][** âš ï¸ Database Agenda Commands]]
:    - [[file:13-agenda.org::1238][** âš ï¸ Tree View Commands]]
:    - [[file:13-agenda.org::1249][** âš ï¸ Configuration Settings]]
:    - [[file:13-agenda.org::1261][** âš ï¸ Agenda Item Properties]]
:    - [[file:13-agenda.org::1278][** âš ï¸ Item Type Icons]]
:    - [[file:13-agenda.org::1291][** âš ï¸ Quick Workflow]]
:    - [[file:13-agenda.org::1299][* âš ï¸ Related Topics]]
: 
: ** [[file:14-journal.org][14-journal.org]] (7 items)
:    - [[file:14-journal.org::418][*** âš ï¸ Accessing the Calendar]]
:    - [[file:14-journal.org::423][*** âš ï¸ Calendar Features]]
:    - [[file:14-journal.org::440][*** âš ï¸ Quick Actions in Calendar]]
:    - [[file:14-journal.org::448][** âš ï¸ Tree View]]
:    - [[file:14-journal.org::469][** âš ï¸ Week View]]
:    - [[file:14-journal.org::492][** ðŸ‘€ Full-Text Search]]
:    - [[file:14-journal.org::630][** âš ï¸ Status Bar Integration]]
: 
: ** [[file:15-capture.org][15-capture.org]] (1 items)
:    - [[file:15-capture.org::42][** âš ï¸ Your First Capture]]
: 
: ** [[file:17-projectile.org][17-projectile.org]] (1 items)
:    - [[file:17-projectile.org::67][** ðŸ‘€ Creating a Projectile Marker]]
: 
: ** [[file:18-database-search.org][18-database-search.org]] (2 items)
:    - [[file:18-database-search.org::85][** âš ï¸ File Watching]]
:    - [[file:18-database-search.org::317][**** âš ï¸ OpenAI]]
: 
: ** [[file:19-references.org][19-references.org]] (1 items)
:    - [[file:19-references.org::125][** âš ï¸ Multiple Citations]]
: 
: ** [[file:20-editmarks.org][20-editmarks.org]] (1 items)
:    - [[file:20-editmarks.org::604][** ðŸ‘€ Export Compatibility]]
: 
: ** [[file:22-hydra-menus.org][22-hydra-menus.org]] (1 items)
:    - [[file:22-hydra-menus.org::73][** ðŸ‘€ Understanding Exit Behaviors]]
: 
: Total: 80 items need review

* Current Review Status
:PROPERTIES:
:VISIBILITY: folded
:END:

The results from running the above block will appear here after execution.
Items link directly to the source file and line number for quick navigation.

** Workflow

1. Run the source block above with `C-c C-c'
2. Click on any item link to jump to that heading
3. Review the content
4. Change the heading's TODO state from âš ï¸ to âœ… when satisfied
5. Re-run the block to update the agenda

** Legend

| State | Meaning |
|-------+---------|
| âš ï¸    | New heading, needs review |
| ðŸ‘€    | Changed heading, needs review |
| âœ…    | Reviewed and approved |

                                                                                                                                                                  
     
* Add Review Markers to Unmarked Headings

Run this block to add âš ï¸ to all headings that do not have a TODO state.

#+begin_src python :results output
import os, re

TODO_STATES = ["âš ï¸", "ðŸ‘€", "âœ…", "TODO", "DONE", "NEXT", "WAITING", "CANCELLED"]

def has_todo(line):
    m = re.match(r"^\*+\s+(.*)$", line)
    if not m: return True
    first = m.group(1).split()[0] if m.group(1).split() else ""
    return first in TODO_STATES

total = 0
for fname in sorted(os.listdir(".")):
    if not fname.endswith(".org") or fname == "review-agenda.org": continue
    with open(fname, "r") as f: lines = f.readlines()
    new_lines, changes = [], []
    for i, line in enumerate(lines):
        if re.match(r"^\*+\s", line) and not has_todo(line):
            new_lines.append(re.sub(r"^(\*+\s+)", r"\1âš ï¸ ", line))
            changes.append(f"  Line {i+1}: {line.strip()}")
        else:
            new_lines.append(line)
    if changes:
        with open(fname, "w") as f: f.writelines(new_lines)
        print(f"\n{fname}:")
        for c in changes: print(c)
        total += len(changes)

print(f"\nTotal: {total} headings updated" if total else "All headings have TODO states.")
#+end_src

* Add Review Markers (TypeScript API)

Uses the scimax org modification API to add âš ï¸ markers to unmarked headings.

#+begin_src typescript :results output
import { org } from './src/parser/orgModify';
import * as fs from 'fs';

const TODO_STATES = ['âš ï¸', 'ðŸ‘€', 'âœ…', 'TODO', 'DONE', 'NEXT', 'WAITING', 'CANCELLED'];
let total = 0;

for (const fname of fs.readdirSync('.').filter(f => f.endsWith('.org') && f !== 'review-agenda.org')) {
    const doc = org.parseFile(fname);
    let changes: string[] = [];

    org.mapHeadlines(doc, h => {
        if (!h.properties.todoKeyword || !TODO_STATES.includes(h.properties.todoKeyword)) {
            h.properties.todoKeyword = 'âš ï¸';
            h.properties.todoType = 'todo';
            changes.push(`  Line ${h.properties.lineNumber}: ${h.properties.rawValue}`);
        }
    });

    if (changes.length > 0) {
        org.writeFile(fname, doc);
        console.log(`\n${fname}:`);
        changes.forEach(c => console.log(c));
        total += changes.length;
    }
}

console.log(total > 0 ? `\nTotal: ${total} headings updated` : 'All headings have TODO states.');
#+end_src