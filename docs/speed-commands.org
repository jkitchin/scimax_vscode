#+TITLE: Speed Commands
#+AUTHOR: Scimax VS Code Team
#+DATE: 2026-01-13
#+STARTUP: overview
#+OPTIONS: toc:2 num:t H:4
#+TODO: ‚ö†Ô∏è üëÄ | ‚úÖ

*Keybinding Note:* This extension uses Emacs-style keybindings where Ctrl is used on all platforms (not Cmd on Mac), except where explicitly noted. Mac alternatives are shown as Cmd where applicable.

* ‚ö†Ô∏è Introduction

Speed commands are single-letter keyboard shortcuts that work when the cursor is positioned at the very beginning (column 0) of a heading line. This feature, borrowed from Emacs org-mode, provides lightning-fast navigation and editing without the need for complex key chords.

** ‚ö†Ô∏è What are Speed Commands?

Speed commands transform the beginning of each heading into a powerful command interface. When your cursor is at column 0 of a heading (the first star ~*~ in org-mode or the first hash ~#~ in markdown), you can press a single key to execute common operations:

- Navigation: jump between headings, siblings, parent
- Visibility: fold/unfold sections
- Structure editing: move, promote, demote, cut, paste
- TODO management: cycle states, set priorities
- Planning: add schedules and deadlines
- Metadata: set tags, properties, effort estimates
- Time tracking: clock in and out
- Archiving: archive completed tasks

This approach is significantly faster than using traditional keybindings or menu commands for frequent operations.

** ‚ö†Ô∏è Why Use Speed Commands?

- *Efficiency*: Single keystrokes instead of multi-key combinations
- *Contextual*: Only active at heading starts, so no conflicts with normal typing
- *Discoverable*: Press ~?~ at a heading start to see all available commands
- *Emacs-compatible*: Familiar workflow for Emacs org-mode users

* ‚ö†Ô∏è Configuration

** ‚ö†Ô∏è Enabling Speed Commands

Speed commands are enabled by default in Scimax VS Code. To toggle them on or off:

*** ‚ö†Ô∏è Via Settings UI

1. Open VS Code Settings (~Ctrl+,~ or ~Cmd+,~ on Mac)
2. Search for "speed commands"
3. Toggle the checkbox for *Scimax: Speed Commands > Enabled*

*** ‚ö†Ô∏è Via settings.json

Add or modify this setting in your ~settings.json~:

#+BEGIN_SRC json
{
  "scimax.speedCommands.enabled": true
}
#+END_SRC

*** ‚ö†Ô∏è Via Command Palette

1. Open Command Palette (~Ctrl+Shift+P~ or ~Cmd+Shift+P~ on Mac)
2. Type "speed" and select *Scimax: Toggle Speed Commands*

** ‚ö†Ô∏è Supported File Types

Speed commands work in:
- Org-mode files (~.org~)
- Markdown files (~.md~, ~.markdown~)

* ‚ö†Ô∏è When Speed Commands are Active

Speed commands are only active when *all* of the following conditions are met:

1. *Speed commands are enabled* in settings (~scimax.speedCommands.enabled: true~)
2. *Cursor is at column 0* (the very beginning of the line)
3. *Line is a heading* (starts with ~*~ for org-mode or ~#~ for markdown)
4. *No text is selected* (cursor position only, not a selection)

** ‚ö†Ô∏è Visual Indicator

When speed commands are active, you'll notice that single key presses trigger actions immediately. If speed commands aren't working:

1. Check that your cursor is at position 0 (before the first ~*~ or ~#~)
2. Ensure no text is selected
3. Verify the file type is org or markdown
4. Check settings to confirm speed commands are enabled

* ‚ö†Ô∏è Speed Command Reference

This section provides a complete listing of all available speed commands, organized by functional category.

** ‚ö†Ô∏è Navigation Commands

Move efficiently through your document structure.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~n~ | Next heading             | Move to the next visible heading at any level     |
| ~p~ | Previous heading         | Move to the previous visible heading at any level |
| ~f~ | Next sibling             | Move to next heading at the same level            |
| ~b~ | Previous sibling         | Move to previous heading at the same level        |
| ~u~ | Parent heading           | Move up to the parent heading                     |
| ~j~ | Jump to heading          | Quick picker to jump to any heading in file       |
| ~g~ | Go to... (submenu)       | Show navigation submenu with more options         |

*** ‚ö†Ô∏è Go To Submenu Options

The ~g~ key opens a submenu with additional navigation choices:

| Key | Command                  | Description                                |
|-----+--------------------------+--------------------------------------------|
| ~n~ | Next heading             | Next visible heading                       |
| ~p~ | Previous heading         | Previous visible heading                   |
| ~f~ | Next sibling             | Next heading at same level                 |
| ~b~ | Previous sibling         | Previous heading at same level             |
| ~u~ | Parent heading           | Parent heading                             |
| ~j~ | Jump to any heading      | Quick picker for any heading               |
| ~1~ | First heading            | Jump to first heading in document          |
| ~$~ | Last heading             | Jump to last heading in document           |

** ‚ö†Ô∏è Visibility/Folding Commands

Control how much content is visible in your document.

| Key     | Command                  | Description                                    |
|---------+--------------------------+------------------------------------------------|
| ~c~     | Cycle global visibility  | Cycle through: overview ‚Üí contents ‚Üí show all  |
| ~C~     | Show all children        | Unfold all children of current subtree         |
| ~o~     | Overview                 | Fold all headings (show only top-level)        |
| ~Tab~   | Cycle fold at point      | Toggle folding of current heading              |

** ‚ö†Ô∏è Structure Editing Commands

Reorganize and modify your document structure.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~U~ | Move subtree up          | Move entire subtree (and children) up             |
| ~D~ | Move subtree down        | Move entire subtree (and children) down           |
| ~r~ | Demote subtree           | Decrease level of subtree (shift right)           |
| ~l~ | Promote subtree          | Increase level of subtree (shift left)            |
| ~R~ | Demote heading           | Decrease level of heading only (not children)     |
| ~L~ | Promote heading          | Increase level of heading only (not children)     |
| ~w~ | Kill (cut) subtree       | Cut subtree to clipboard                          |
| ~y~ | Yank (paste) subtree     | Paste subtree from clipboard with level adjust    |
| ~W~ | Clone subtree            | Duplicate the current subtree                     |

*** ‚ö†Ô∏è Structure Editing Notes

- *Promote* (left) decreases the heading level (fewer stars/hashes)
- *Demote* (right) increases the heading level (more stars/hashes)
- Uppercase ~L~/~R~ affect only the heading line
- Lowercase ~l~/~r~ affect the entire subtree
- ~y~ (yank) intelligently adjusts heading levels to match context

** ‚ö†Ô∏è TODO and Priority Commands

Manage task states and priorities.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~t~ | Cycle TODO state         | Cycle through: (none) ‚Üí TODO ‚Üí DONE ‚Üí (none)      |
| ~,~ | Cycle priority up        | Increase priority: C ‚Üí B ‚Üí A                      |
| ~1~ | Priority [#A]            | Set priority to A (highest)                       |
| ~2~ | Priority [#B]            | Set priority to B (medium)                        |
| ~3~ | Priority [#C]            | Set priority to C (lowest)                        |
| ~0~ | Remove priority          | Remove priority marker entirely                   |

*** ‚ö†Ô∏è Priority System

Org-mode uses a three-level priority system:
- *[#A]* - High priority (critical, urgent)
- *[#B]* - Medium priority (normal importance)
- *[#C]* - Low priority (nice to have)

Priorities appear after the TODO keyword: ~** TODO [#A] Important task~

** ‚ö†Ô∏è Planning/Timestamp Commands

Add scheduling and deadline information to tasks.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~s~ | Add/edit SCHEDULED       | Set when you plan to work on this task            |
| ~d~ | Add/edit DEADLINE        | Set when this task must be completed              |
| ~.~ | Insert timestamp         | Insert an inactive timestamp at point             |

*** ‚ö†Ô∏è Timestamp Types

- *SCHEDULED*: When you plan to start working on the task
  - Format: ~SCHEDULED: <2026-01-13 Mon>~
  - Appears in agenda on the scheduled date

- *DEADLINE*: When the task must be completed
  - Format: ~DEADLINE: <2026-01-20 Mon>~
  - Appears in agenda with warnings before due date

- *Plain timestamp*: Reference dates, events, notes
  - Format: ~[2026-01-13 Mon 14:30]~
  - For documentation purposes

** ‚ö†Ô∏è Metadata Commands

Add tags, properties, and effort estimates to headings.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~:~ | Set tags                 | Add or modify tags (colon-separated)              |
| ~e~ | Set effort               | Set estimated effort/duration for task            |
| ~P~ | Set property             | Set a custom property in the properties drawer    |

*** ‚ö†Ô∏è Tags

Tags are keywords attached to headings for categorization and filtering:

#+BEGIN_EXAMPLE
** TODO Complete documentation :work:urgent:docs:
#+END_EXAMPLE

Tags are:
- Separated by colons (~:~)
- Can contain letters, numbers, and special chars (~_@#%~)
- Inherited by child headings
- Used for agenda filtering and searches
- Automatically aligned to column 77 (Emacs-style)

*** ‚ö†Ô∏è Effort Estimates

Effort is stored as a property in ~H:MM~ format:

#+BEGIN_EXAMPLE
** TODO Write documentation
:PROPERTIES:
:Effort: 2:00
:END:
#+END_EXAMPLE

Common effort values:
- ~0:15~ - 15 minutes
- ~0:30~ - 30 minutes
- ~1:00~ - 1 hour
- ~2:00~ - 2 hours
- ~4:00~ - Half day
- ~8:00~ - Full day

*** ‚ö†Ô∏è Properties

Properties are key-value pairs stored in a properties drawer:

#+BEGIN_EXAMPLE
** Research Project
:PROPERTIES:
:CUSTOM_ID: research-2026
:CATEGORY: Research
:Effort: 8:00
:ASSIGNED: John Doe
:END:
#+END_EXAMPLE

Common property names:
- ~ID~ - Unique identifier
- ~CUSTOM_ID~ - User-defined ID for linking
- ~CATEGORY~ - Category for agenda display
- ~Effort~ - Estimated effort
- ~LOGGING~ - Log state changes
- ~COLUMNS~ - Column view format

** ‚ö†Ô∏è Clocking Commands

Track time spent on tasks.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~I~ | Clock in                 | Start time tracking for current task              |
| ~O~ | Clock out                | Stop time tracking                                |

*** ‚ö†Ô∏è Clocking Workflow

1. Position cursor at column 0 of a task heading
2. Press ~I~ to clock in - starts timer
3. Work on the task
4. Press ~O~ to clock out - stops timer and records duration

Clock entries are stored in a ~:LOGBOOK:~ drawer:

#+BEGIN_EXAMPLE
** TODO Write documentation
:LOGBOOK:
CLOCK: [2026-01-13 Mon 09:00]--[2026-01-13 Mon 11:30] =>  2:30
CLOCK: [2026-01-12 Fri 14:00]--[2026-01-12 Fri 15:45] =>  1:45
:END:
#+END_EXAMPLE

*** ‚ö†Ô∏è Clocking Notes

- Only one task can be clocked in at a time
- Clocking in a new task automatically clocks out the previous one
- Clock duration is automatically calculated
- Clock data is used for time reports and agenda views

** ‚ö†Ô∏è Archive Commands

Move completed tasks to archive storage.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~a~ | Archive subtree          | Move subtree to archive file                      |
| ~A~ | Toggle :ARCHIVE: tag     | Add/remove ARCHIVE tag (marks for archiving)      |
| ~$~ | Archive to sibling       | Move subtree under an "Archive" sibling heading   |

*** ‚ö†Ô∏è Archive File

By default, ~a~ moves the subtree to a file named ~{basename}_archive.org~:
- ~notes.org~ ‚Üí ~notes_archive.org~
- ~projects.org~ ‚Üí ~projects_archive.org~

The archived subtree is tagged with ~:ARCHIVE:~ and includes metadata:

#+BEGIN_EXAMPLE
* DONE Completed project :ARCHIVE:
:PROPERTIES:
:ARCHIVE_TIME: [2026-01-13 Mon 15:30]
:ARCHIVE_FILE: ~/org/projects.org
:END:
#+END_EXAMPLE

*** ‚ö†Ô∏è Archive to Sibling

The ~$~ command creates or finds an "Archive" heading at the same level and moves the subtree under it (demoted by one level):

#+BEGIN_EXAMPLE
* Active Projects
** TODO Project A
** TODO Project B

* Archive :ARCHIVE:
*** DONE Old project 1
*** DONE Old project 2
#+END_EXAMPLE

** ‚ö†Ô∏è Special Commands

Additional utility commands.

| Key | Command                  | Description                                       |
|-----+--------------------------+---------------------------------------------------|
| ~N~ | Narrow to subtree        | Focus only on current subtree (hide others)       |
| ~S~ | Widen                    | Show all content (undo narrowing)                 |
| ~?~ | Speed commands help      | Show this help in quick pick menu                 |

*** ‚ö†Ô∏è Narrowing

Narrowing focuses your view on a single subtree, hiding all other content. This is useful for:
- Focusing on a specific section while writing
- Reducing distractions
- Presenting a single topic
- Temporarily isolating content for editing

After narrowing with ~N~, press ~S~ (at any heading) to restore the full view.

* ‚ö†Ô∏è Tips for Effective Use

** ‚ö†Ô∏è Learning the Commands

1. *Start with navigation*: ~n~, ~p~, ~f~, ~b~, ~u~ are the most frequently used
2. *Use the help*: Press ~?~ at any heading start to see all commands
3. *Muscle memory*: The keys are mnemonic:
   - ~n~ = next, ~p~ = previous, ~f~ = forward, ~b~ = backward
   - ~u~ = up (parent)
   - ~t~ = TODO, ~s~ = schedule, ~d~ = deadline
   - ~I~/~O~ = In/Out (clocking)
   - ~l~/~r~ = left/right (promote/demote)

** ‚ö†Ô∏è Common Workflows

*** ‚ö†Ô∏è Quick Task Management

1. Create heading with ~Ctrl+Enter~
2. Move to beginning of line (~Home~ or ~Ctrl+A~)
3. Press ~t~ to add TODO state
4. Press ~1~ to set high priority
5. Press ~s~ to schedule it
6. Press ~:~ to add tags

*** ‚ö†Ô∏è Organizing Content

1. Navigate to a heading
2. Use ~U~/~D~ to reorder siblings
3. Use ~l~/~r~ to adjust hierarchy
4. Use ~w~ to cut and ~y~ to paste sections
5. Use ~a~ to archive completed work

*** ‚ö†Ô∏è Reviewing Documents

1. Press ~o~ to see overview (all headings folded)
2. Use ~n~/~p~ to navigate between sections
3. Press ~Tab~ to expand interesting sections
4. Press ~c~ to cycle through visibility levels

** ‚ö†Ô∏è Combining with Regular Keybindings

Speed commands complement (don't replace) regular keybindings:

- Use speed commands for quick operations when cursor is at heading start
- Use regular keybindings (~Ctrl+C Ctrl+T~, etc.) when cursor is elsewhere
- Use ~Ctrl+A~ or ~Home~ to quickly jump to column 0 to activate speed commands

** ‚ö†Ô∏è Cursor Position Matters

Remember: speed commands *only* work at column 0. If a speed command doesn't trigger:

1. Press ~Home~ or ~Ctrl+A~ to move to beginning of line
2. Verify you're on a heading line (starts with ~*~ or ~#~)
3. Check that no text is selected

** ‚ö†Ô∏è Customization

Currently, speed command keys are pre-defined and cannot be customized. The key mappings follow standard Emacs org-mode conventions for consistency and muscle memory compatibility.

If you need custom keybindings, use VS Code's keybinding system to bind the underlying commands (e.g., ~scimax.org.nextHeading~, ~scimax.org.cycleTodo~) to your preferred key combinations.

* ‚ö†Ô∏è Reference: All Speed Commands

Complete alphabetical reference of all speed commands.

| Key     | Category    | Command                  |
|---------+-------------+--------------------------|
| ~,~     | TODO        | Cycle priority up        |
| ~.~     | Planning    | Insert timestamp         |
| ~0~     | TODO        | Remove priority          |
| ~1~     | TODO        | Set priority [#A]        |
| ~2~     | TODO        | Set priority [#B]        |
| ~3~     | TODO        | Set priority [#C]        |
| ~:~     | Metadata    | Set tags                 |
| ~?~     | Special     | Speed commands help      |
| ~$~     | Special     | Archive to sibling       |
| ~a~     | Special     | Archive subtree          |
| ~A~     | Special     | Toggle :ARCHIVE: tag     |
| ~b~     | Navigation  | Previous sibling         |
| ~c~     | Visibility  | Cycle global visibility  |
| ~C~     | Visibility  | Show all children        |
| ~d~     | Planning    | Add/edit DEADLINE        |
| ~D~     | Structure   | Move subtree down        |
| ~e~     | Metadata    | Set effort               |
| ~f~     | Navigation  | Next sibling             |
| ~g~     | Navigation  | Go to... (submenu)       |
| ~I~     | Clocking    | Clock in                 |
| ~j~     | Navigation  | Jump to heading          |
| ~l~     | Structure   | Promote subtree          |
| ~L~     | Structure   | Promote heading          |
| ~n~     | Navigation  | Next heading             |
| ~N~     | Special     | Narrow to subtree        |
| ~o~     | Visibility  | Overview (fold all)      |
| ~O~     | Clocking    | Clock out                |
| ~p~     | Navigation  | Previous heading         |
| ~P~     | Metadata    | Set property             |
| ~r~     | Structure   | Demote subtree           |
| ~R~     | Structure   | Demote heading           |
| ~s~     | Planning    | Add/edit SCHEDULED       |
| ~S~     | Special     | Widen (show all)         |
| ~t~     | TODO        | Cycle TODO state         |
| ~Tab~   | Visibility  | Cycle fold at point      |
| ~u~     | Navigation  | Parent heading           |
| ~U~     | Structure   | Move subtree up          |
| ~w~     | Structure   | Kill (cut) subtree       |
| ~W~     | Structure   | Clone subtree            |
| ~y~     | Structure   | Yank (paste) subtree     |

* ‚ö†Ô∏è Troubleshooting

** ‚ö†Ô∏è Speed Commands Not Working

*Problem*: Pressing keys doesn't trigger speed commands

*Solutions*:
1. Verify cursor is at column 0 (before the ~*~ or ~#~)
2. Check file type is ~.org~ or ~.md~
3. Ensure no text is selected
4. Verify speed commands are enabled: ~scimax.speedCommands.enabled: true~
5. Restart VS Code after changing settings

** ‚ö†Ô∏è Wrong Command Executes

*Problem*: Different command executes than expected

*Solutions*:
1. Press ~?~ to see command list and verify key mapping
2. Check for conflicting VS Code keybindings
3. Ensure you're in an org or markdown file
4. Update extension to latest version

** ‚ö†Ô∏è Help Menu Shows Wrong Commands

*Problem*: Help menu (~?~) shows outdated information

*Solution*: The help is generated from code, so this shouldn't occur. If it does, report as a bug.

* ‚ö†Ô∏è Related Documentation

- [[file:keybindings.org][Keybindings Reference]] - Regular keybindings for all features
- [[file:document-structure.org][Document Structure]] - Headings, folding, and outline management
- [[file:todo-items.org][TODO Items]] - Task management and workflow
- [[file:timestamps.org][Timestamps]] - Date and time handling
- [[file:agenda.org][Agenda]] - Task planning and scheduling views

* ‚ö†Ô∏è See Also

** ‚ö†Ô∏è External Resources

- [[https://orgmode.org/manual/Speed-Keys.html][Org-mode Manual: Speed Keys]]
- [[https://orgmode.org/worg/org-tutorials/org-speed-keys.html][Org-mode Speed Keys Tutorial]]

** ‚ö†Ô∏è Implementation Details

Speed commands are implemented in:
- ~/src/org/speedCommands/~ - Core implementation
  - ~config.ts~ - Command definitions and mappings
  - ~context.ts~ - Context detection and command registration
  - ~navigation.ts~ - Navigation commands
  - ~visibility.ts~ - Folding/visibility commands
  - ~planning.ts~ - Schedule and deadline commands
  - ~metadata.ts~ - Tags, properties, and effort
  - ~clocking.ts~ - Time tracking
  - ~archive.ts~ - Archive operations
  - ~structure.ts~ - Structure editing commands
