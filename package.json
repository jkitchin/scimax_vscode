{
  "name": "scimax-vscode",
  "displayName": "Scimax for VS Code",
  "description": "Scientific computing environment inspired by Emacs Scimax - journal, literate programming, org-mode enhancements",
  "version": "0.1.0",
  "publisher": "jkitchin",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/jkitchin/scimax_vscode"
  },
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other",
    "Notebooks",
    "Programming Languages"
  ],
  "keywords": [
    "scimax",
    "org-mode",
    "journal",
    "literate programming",
    "scientific computing",
    "research"
  ],
  "activationEvents": [
    "onLanguage:org",
    "onLanguage:markdown",
    "onLanguage:bibtex",
    "workspaceContains:**/*.org",
    "workspaceContains:**/*.bib"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "languages": [
      {
        "id": "org",
        "aliases": ["Org Mode", "org-mode", "Org"],
        "extensions": [".org"],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "org",
        "scopeName": "source.org",
        "path": "./syntaxes/org.tmLanguage.json",
        "embeddedLanguages": {
          "meta.embedded.block.python": "python",
          "meta.embedded.block.shellscript": "shellscript",
          "meta.embedded.block.latex": "latex",
          "meta.embedded.block.json": "json",
          "meta.embedded.block.javascript": "javascript",
          "meta.embedded.block.typescript": "typescript",
          "meta.embedded.block.sql": "sql",
          "meta.embedded.block.yaml": "yaml",
          "meta.embedded.block.r": "r",
          "meta.embedded.block.julia": "julia",
          "meta.embedded.block.c": "c",
          "meta.embedded.block.cpp": "cpp",
          "meta.embedded.block.java": "java",
          "meta.embedded.block.rust": "rust",
          "meta.embedded.block.go": "go",
          "meta.embedded.block.ruby": "ruby",
          "meta.embedded.block.perl": "perl",
          "meta.embedded.block.css": "css",
          "meta.embedded.block.html": "html",
          "meta.embedded.block.xml": "xml",
          "meta.embedded.block.markdown": "markdown"
        }
      }
    ],
    "semanticTokenTypes": [
      {
        "id": "orgLink",
        "superType": "string",
        "description": "Org-mode link"
      },
      {
        "id": "orgCitation",
        "superType": "variable",
        "description": "Org-mode citation reference"
      },
      {
        "id": "orgTimestamp",
        "superType": "number",
        "description": "Org-mode timestamp"
      },
      {
        "id": "orgHeading",
        "superType": "class",
        "description": "Org-mode heading"
      },
      {
        "id": "orgTodo",
        "superType": "keyword",
        "description": "Org-mode TODO keyword"
      },
      {
        "id": "orgTag",
        "superType": "label",
        "description": "Org-mode tag"
      }
    ],
    "semanticTokenModifiers": [
      {
        "id": "active",
        "description": "Active timestamp"
      },
      {
        "id": "inactive",
        "description": "Inactive timestamp"
      },
      {
        "id": "done",
        "description": "Completed TODO state"
      }
    ],
    "semanticTokenScopes": [
      {
        "language": "org",
        "scopes": {
          "orgLink": ["markup.underline.link.org"],
          "orgCitation": ["entity.other.citation.org"],
          "orgTimestamp": ["constant.other.timestamp.org"],
          "orgHeading": ["entity.name.section.org"],
          "orgTodo": ["keyword.other.todo.org"],
          "orgTag": ["entity.name.tag.org"]
        }
      }
    ],
    "configurationDefaults": {
      "editor.tokenColorCustomizations": {
        "textMateRules": [
          {
            "scope": [
              "entity.other.citation.org",
              "entity.other.citation.bracket.org",
              "entity.other.citation.at.org",
              "variable.other.citation.key.org"
            ],
            "settings": {
              "foreground": "#2E8B57"
            }
          },
          {
            "scope": [
              "markup.underline.link.org",
              "markup.underline.link.angle.org",
              "markup.underline.link.plain.org",
              "markup.underline.link.file.org",
              "markup.underline.link.doi.org",
              "markup.underline.link.bibliography.org",
              "markup.underline.link.bibliographystyle.org",
              "markup.underline.link.elisp.org",
              "markup.underline.link.shell.org",
              "markup.underline.link.info.org",
              "markup.underline.link.mailto.org",
              "markup.underline.link.generic.org",
              "string.other.link.title.org",
              "string.other.link.description.org"
            ],
            "settings": {
              "foreground": "#6495ED"
            }
          },
          {
            "scope": [
              "markup.underline.link.ref.org",
              "keyword.other.ref.org",
              "variable.other.label.org"
            ],
            "settings": {
              "foreground": "#DA70D6"
            }
          },
          {
            "scope": [
              "entity.name.label.org",
              "entity.name.tag.label.org"
            ],
            "settings": {
              "foreground": "#DDA0DD"
            }
          }
        ]
      },
      "editor.semanticTokenColorCustomizations": {
        "rules": {
          "orgCitation": "#2E8B57",
          "orgLink": "#6495ED"
        }
      }
    },
    "commands": [
      {
        "command": "scimax.journal.today",
        "title": "Scimax: Open Today's Journal",
        "icon": "$(calendar)"
      },
      {
        "command": "scimax.journal.new",
        "title": "Scimax: New Journal Entry"
      },
      {
        "command": "scimax.journal.prev",
        "title": "Scimax: Previous Journal Entry"
      },
      {
        "command": "scimax.journal.next",
        "title": "Scimax: Next Journal Entry"
      },
      {
        "command": "scimax.journal.goto",
        "title": "Scimax: Go to Journal Date"
      },
      {
        "command": "scimax.journal.search",
        "title": "Scimax: Search Journal"
      },
      {
        "command": "scimax.journal.calendar",
        "title": "Scimax: Show Journal Calendar"
      },
      {
        "command": "scimax.db.reindex",
        "title": "Scimax: Reindex Files"
      },
      {
        "command": "scimax.db.search",
        "title": "Scimax: Search All Files"
      },
      {
        "command": "scimax.db.searchHeadings",
        "title": "Scimax: Search Headings"
      },
      {
        "command": "scimax.org.executeBlock",
        "title": "Scimax: Execute Code Block"
      },
      {
        "command": "scimax.org.executeAllBlocks",
        "title": "Scimax: Execute All Code Blocks"
      },
      {
        "command": "scimax.org.insertBlock",
        "title": "Scimax: Insert Code Block"
      },
      {
        "command": "scimax.org.nextBlock",
        "title": "Scimax: Go to Next Code Block"
      },
      {
        "command": "scimax.org.prevBlock",
        "title": "Scimax: Go to Previous Code Block"
      },
      {
        "command": "scimax.db.searchBlocks",
        "title": "Scimax: Search Code Blocks"
      },
      {
        "command": "scimax.db.searchHashtags",
        "title": "Scimax: Search by Hashtag"
      },
      {
        "command": "scimax.db.searchByTag",
        "title": "Scimax: Search by Tag"
      },
      {
        "command": "scimax.db.searchByProperty",
        "title": "Scimax: Search by Property"
      },
      {
        "command": "scimax.db.showTodos",
        "title": "Scimax: Show TODO Items"
      },
      {
        "command": "scimax.db.agenda",
        "title": "Scimax: Show Agenda"
      },
      {
        "command": "scimax.db.deadlines",
        "title": "Scimax: Show Upcoming Deadlines"
      },
      {
        "command": "scimax.db.browseFiles",
        "title": "Scimax: Browse Indexed Files"
      },
      {
        "command": "scimax.db.setScope",
        "title": "Scimax: Set Search Scope"
      },
      {
        "command": "scimax.db.optimize",
        "title": "Scimax: Optimize Database"
      },
      {
        "command": "scimax.db.clear",
        "title": "Scimax: Clear Database"
      },
      {
        "command": "scimax.db.stats",
        "title": "Scimax: Show Database Stats"
      },
      {
        "command": "scimax.db.searchSemantic",
        "title": "Scimax: Semantic Search (AI)"
      },
      {
        "command": "scimax.db.searchHybrid",
        "title": "Scimax: Hybrid Search (Keywords + AI)"
      },
      {
        "command": "scimax.db.configureEmbeddings",
        "title": "Scimax: Configure Embedding Service"
      },
      {
        "command": "scimax.journal.refresh",
        "title": "Scimax: Refresh Journal View",
        "icon": "$(refresh)"
      },
      {
        "command": "scimax.journal.openDirectory",
        "title": "Scimax: Open Journal Directory"
      },
      {
        "command": "scimax.journal.insertTimestamp",
        "title": "Scimax: Insert Timestamp"
      },
      {
        "command": "scimax.journal.quickLog",
        "title": "Scimax: Quick Log Entry"
      },
      {
        "command": "scimax.journal.stats",
        "title": "Scimax: Show Journal Statistics"
      },
      {
        "command": "scimax.journal.weekView",
        "title": "Scimax: This Week's Entries"
      },
      {
        "command": "scimax.ref.insertCitation",
        "title": "Scimax: Insert Citation"
      },
      {
        "command": "scimax.ref.openBibliography",
        "title": "Scimax: Open Bibliography"
      },
      {
        "command": "scimax.ref.fetchFromDOI",
        "title": "Scimax: Fetch BibTeX from DOI"
      },
      {
        "command": "scimax.ref.searchReferences",
        "title": "Scimax: Search References"
      },
      {
        "command": "scimax.ref.findCitations",
        "title": "Scimax: Find Citations of Reference"
      },
      {
        "command": "scimax.ref.copyBibTeX",
        "title": "Scimax: Copy BibTeX Entry"
      },
      {
        "command": "scimax.ref.refresh",
        "title": "Scimax: Refresh References",
        "icon": "$(refresh)"
      },
      {
        "command": "scimax.notebook.new",
        "title": "Scimax: New Notebook"
      },
      {
        "command": "scimax.notebook.open",
        "title": "Scimax: Open Notebook"
      },
      {
        "command": "scimax.notebook.openMasterFile",
        "title": "Scimax: Open Notebook Master File"
      },
      {
        "command": "scimax.notebook.recentFiles",
        "title": "Scimax: Recent Files in Notebook"
      },
      {
        "command": "scimax.notebook.search",
        "title": "Scimax: Search in Notebook"
      },
      {
        "command": "scimax.notebook.agenda",
        "title": "Scimax: Notebook Agenda"
      },
      {
        "command": "scimax.notebook.addCollaborator",
        "title": "Scimax: Add Collaborator"
      },
      {
        "command": "scimax.notebook.archive",
        "title": "Scimax: Archive Notebook"
      },
      {
        "command": "scimax.notebook.settings",
        "title": "Scimax: Notebook Settings"
      },
      {
        "command": "scimax.notebook.index",
        "title": "Scimax: Index Notebook"
      },
      {
        "command": "scimax.notebook.info",
        "title": "Scimax: Notebook Info"
      },
      {
        "command": "scimax.notebook.remove",
        "title": "Scimax: Remove Notebook from Tracking"
      },
      {
        "command": "scimax.org.toggleFold",
        "title": "Scimax: Toggle Fold at Cursor"
      },
      {
        "command": "scimax.org.cycleGlobalFold",
        "title": "Scimax: Cycle Global Folding"
      }
    ],
    "keybindings": [
      {
        "command": "workbench.action.showCommands",
        "key": "ctrl+x",
        "mac": "cmd+x",
        "args": "Scimax"
      },
      {
        "command": "scimax.journal.today",
        "key": "ctrl+shift+j",
        "mac": "cmd+shift+j"
      },
      {
        "command": "scimax.journal.prev",
        "key": "alt+[",
        "when": "resourceFilename =~ /^\\d{4}-\\d{2}-\\d{2}\\.(org|md)$/"
      },
      {
        "command": "scimax.journal.next",
        "key": "alt+]",
        "when": "resourceFilename =~ /^\\d{4}-\\d{2}-\\d{2}\\.(org|md)$/"
      },
      {
        "command": "scimax.org.executeBlock",
        "key": "ctrl+enter",
        "mac": "cmd+enter",
        "when": "editorTextFocus && editorLangId =~ /org|markdown/"
      },
      {
        "command": "scimax.ref.insertCitation",
        "key": "ctrl+]",
        "mac": "cmd+]",
        "when": "editorTextFocus && editorLangId =~ /org|markdown/"
      },
      {
        "command": "scimax.org.toggleFold",
        "key": "tab",
        "when": "editorTextFocus && editorLangId == 'org' && !editorHasSelection && !suggestWidgetVisible && !inSnippetMode"
      },
      {
        "command": "scimax.org.cycleGlobalFold",
        "key": "shift+tab",
        "when": "editorTextFocus && editorLangId == 'org'"
      }
    ],
    "configuration": {
      "title": "Scimax",
      "properties": {
        "scimax.journal.directory": {
          "type": "string",
          "default": "",
          "description": "Directory for journal files. If empty, uses ~/scimax-journal"
        },
        "scimax.journal.format": {
          "type": "string",
          "enum": ["markdown", "org"],
          "default": "markdown",
          "description": "File format for journal entries"
        },
        "scimax.journal.template": {
          "type": "string",
          "default": "default",
          "description": "Template name for new journal entries"
        },
        "scimax.journal.dateFormat": {
          "type": "string",
          "default": "YYYY-MM-DD",
          "description": "Date format for journal file names"
        },
        "scimax.journal.autoTimestamp": {
          "type": "boolean",
          "default": true,
          "description": "Automatically add timestamps to log entries"
        },
        "scimax.journal.weekStartsOn": {
          "type": "string",
          "enum": ["sunday", "monday"],
          "default": "monday",
          "description": "First day of the week in calendar view"
        },
        "scimax.db.directories": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Additional directories to index for search"
        },
        "scimax.db.excludePatterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": ["**/node_modules/**", "**/.git/**", "**/dist/**"],
          "description": "Glob patterns to exclude from indexing"
        },
        "scimax.db.ignorePatterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": ["**/node_modules/**", "**/.git/**", "**/dist/**", "**/build/**"],
          "description": "Patterns for files to ignore during indexing"
        },
        "scimax.db.autoIndex": {
          "type": "boolean",
          "default": true,
          "description": "Automatically index files on save"
        },
        "scimax.db.embeddingProvider": {
          "type": "string",
          "enum": ["none", "local", "ollama", "openai"],
          "default": "none",
          "description": "Embedding provider for semantic search (local uses Transformers.js)"
        },
        "scimax.db.localModel": {
          "type": "string",
          "enum": ["Xenova/all-MiniLM-L6-v2", "Xenova/bge-small-en-v1.5", "Xenova/gte-small"],
          "default": "Xenova/all-MiniLM-L6-v2",
          "description": "Local embedding model (downloads on first use)"
        },
        "scimax.db.ollamaUrl": {
          "type": "string",
          "default": "http://localhost:11434",
          "description": "Ollama API URL for embeddings"
        },
        "scimax.db.ollamaModel": {
          "type": "string",
          "default": "nomic-embed-text",
          "description": "Ollama model for embeddings"
        },
        "scimax.db.openaiApiKey": {
          "type": "string",
          "default": "",
          "description": "OpenAI API key for embeddings"
        },
        "scimax.literate.pythonPath": {
          "type": "string",
          "default": "",
          "description": "Path to Python executable for code execution"
        },
        "scimax.literate.jupyterPath": {
          "type": "string",
          "default": "",
          "description": "Path to Jupyter executable"
        },
        "scimax.ref.bibliographyFiles": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "Paths to BibTeX bibliography files"
        },
        "scimax.ref.pdfDirectory": {
          "type": "string",
          "default": "",
          "description": "Directory containing PDF files for references"
        },
        "scimax.ref.notesDirectory": {
          "type": "string",
          "default": "",
          "description": "Directory for reference notes"
        },
        "scimax.ref.defaultCiteStyle": {
          "type": "string",
          "enum": ["cite", "citet", "citep", "citeauthor", "citeyear"],
          "default": "cite",
          "description": "Default citation style"
        },
        "scimax.notebook.directory": {
          "type": "string",
          "default": "",
          "description": "Default parent directory for new notebooks"
        },
        "scimax.notebook.defaultTemplate": {
          "type": "string",
          "enum": ["empty", "research", "software", "notes"],
          "default": "research",
          "description": "Default template for new notebooks"
        },
        "scimax.notebook.autoDetect": {
          "type": "boolean",
          "default": true,
          "description": "Automatically detect projects in workspace"
        }
      }
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "scimax",
          "title": "Scimax",
          "icon": "$(beaker)"
        }
      ]
    },
    "views": {
      "scimax": [
        {
          "type": "webview",
          "id": "scimax.journal.calendar",
          "name": "Calendar",
          "icon": "$(calendar)"
        },
        {
          "id": "scimax.journal",
          "name": "Journal Entries",
          "icon": "$(list-tree)"
        },
        {
          "id": "scimax.headings",
          "name": "Headings",
          "icon": "$(list-tree)"
        },
        {
          "id": "scimax.tags",
          "name": "Tags",
          "icon": "$(tag)"
        },
        {
          "id": "scimax.references",
          "name": "References",
          "icon": "$(book)"
        },
        {
          "id": "scimax.notebooks",
          "name": "Notebooks",
          "icon": "$(folder-library)"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "scimax.journal.today",
          "when": "view == scimax.journal",
          "group": "navigation"
        },
        {
          "command": "scimax.journal.refresh",
          "when": "view == scimax.journal",
          "group": "navigation"
        }
      ],
      "editor/context": [
        {
          "command": "scimax.org.executeBlock",
          "when": "editorLangId =~ /org|markdown/",
          "group": "scimax"
        }
      ],
      "commandPalette": [
        {
          "command": "scimax.journal.prev",
          "when": "resourceFilename =~ /^\\d{4}-\\d{2}-\\d{2}\\.(org|md)$/"
        },
        {
          "command": "scimax.journal.next",
          "when": "resourceFilename =~ /^\\d{4}-\\d{2}-\\d{2}\\.(org|md)$/"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "eslint src --ext ts",
    "test": "vitest",
    "package": "vsce package"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "eslint": "^8.55.0",
    "typescript": "^5.3.0",
    "vitest": "^1.0.0",
    "@vscode/vsce": "^2.22.0"
  },
  "dependencies": {
    "@libsql/client": "^0.17.0",
    "@xenova/transformers": "^2.17.0",
    "date-fns": "^2.30.0",
    "minimatch": "^9.0.0"
  }
}
