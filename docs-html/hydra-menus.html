<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hydra Menus</title>
<meta name="author" content="Scimax VS Code Team" />
<style>
.org-content { max-width: 800px; margin: 0 auto; padding: 2rem; font-family: system-ui, sans-serif; line-height: 1.6; }
.org-section { margin-bottom: 2rem; }
.org-todo { font-weight: bold; padding: 0.2em 0.5em; border-radius: 3px; }
.org-todo.org-todo { background: #ff6b6b; color: white; }
.org-todo.org-done { background: #51cf66; color: white; }
.org-priority { color: #e67700; font-weight: bold; }
.org-tags { float: right; font-size: 0.8em; }
.org-tag { background: #e9ecef; padding: 0.2em 0.5em; border-radius: 3px; margin-left: 0.3em; }
.org-timestamp { font-family: monospace; background: #f1f3f5; padding: 0.1em 0.3em; border-radius: 3px; }
.org-src-container { margin: 1rem 0; }
.src { background: #f8f9fa; padding: 1rem; border-radius: 4px; overflow-x: auto; }
pre.example { background: #fff3bf; padding: 1rem; border-radius: 4px; }
blockquote { border-left: 4px solid #ced4da; margin: 1rem 0; padding-left: 1rem; color: #495057; }
.org-center { text-align: center; }
.verse { white-space: pre-line; font-style: italic; }
.org-table { border-collapse: collapse; margin: 1rem 0; }
.org-table th, .org-table td { border: 1px solid #dee2e6; padding: 0.5rem; }
.org-table th { background: #f8f9fa; }
.org-footnote-ref { font-size: 0.8em; }
.org-footnotes { border-top: 1px solid #dee2e6; margin-top: 2rem; padding-top: 1rem; font-size: 0.9em; }
.org-underline { text-decoration: underline; }
.org-statistics-cookie { font-family: monospace; }
.org-toc { background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-bottom: 2rem; }
.org-toc ul { list-style: none; padding-left: 1rem; }
.section-number { color: #868e96; margin-right: 0.5em; }
.admonition { padding: 1rem; margin: 1rem 0; border-radius: 4px; border-left: 4px solid; }
.admonition.org-warning { background: #fff5f5; border-color: #fa5252; }
.admonition.org-note { background: #e7f5ff; border-color: #339af0; }
.admonition.org-tip { background: #ebfbee; border-color: #40c057; }
.admonition.org-important { background: #fff9db; border-color: #fab005; }
</style>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body>
<main class="org-content">
<header id="title-block">
<h1 class="title">Hydra Menus</h1>
<p class="author">Scimax VS Code Team</p>
<p class="date">2026-01-13</p>
</header>
<div id="org-introduction" class="org-section org-level-1">
<h1>⚠️ Introduction</h1>
<p>Hydra menus are a powerful keyboard-driven menu system inspired by Emacs hydra and transient packages. They provide quick access to Scimax commands through persistent, modal menus that remain open until you explicitly close them or execute an exit command.</p>

<div id="org-what-are-hydra-menus" class="org-section org-level-2">
<h2>⚠️ What Are Hydra Menus?</h2>
<p>A hydra menu is a quick pick interface that displays available commands organized into logical groups. Each command is associated with a single keyboard shortcut, allowing you to rapidly execute actions without navigating through multiple menus or remembering complex key combinations.</p>

<p>Think of hydra menus as command palettes optimized for keyboard efficiency:</p>

<ul>
<li><p>Single-key selection (no Enter needed)</p>
</li>
<li><p>Commands stay organized in logical groups</p>
</li>
<li><p>Menus can stay open for repeated actions</p>
</li>
<li><p>Hierarchical navigation with submenus</p>
</li>
<li><p>Visual indicators for toggles and persistent actions</p>
</li>
</ul>

</div>
<div id="org-key-features" class="org-section org-level-2">
<h2>⚠️ Key Features</h2>
<ul>
<li><p>Fast keyboard-driven navigation with single-key selection</p>
</li>
<li><p>Organized command groups with descriptive labels and icons</p>
</li>
<li><p>Persistent menus that stay open for repeated actions (red heads)</p>
</li>
<li><p>Exit-after-action commands (blue heads)</p>
</li>
<li><p>Submenu navigation for hierarchical organization</p>
</li>
<li><p>Toggle indicators showing on/off state</p>
</li>
<li><p>Conditional visibility based on context</p>
</li>
<li><p>Customizable through VS Code settings</p>
</li>
<li><p>Full integration with all Scimax features</p>
</li>
</ul>

</div>
<div id="org-philosophy" class="org-section org-level-2">
<h2>⚠️ Philosophy</h2>
<p>The hydra system is designed around the principle of discoverability and efficiency. Instead of memorizing dozens of keyboard shortcuts, you can press Ctrl+C M to open the main menu and see all available commands with their shortcuts. Once you learn commonly-used shortcuts, you can invoke them directly without opening the menu.</p>

</div>
</div>
<div id="org-getting-started" class="org-section org-level-1">
<h1>⚠️ Getting Started</h1>
<div id="org-opening-the-main-menu" class="org-section org-level-2">
<h2>⚠️ Opening the Main Menu</h2>
<p>The fastest way to access hydra menus is through the main menu:</p>

<ul>
<li><p>Press Ctrl+C M (Cmd+C M on Mac) to open the main Scimax menu</p>
</li>
<li><p>Press Ctrl+C Ctrl+M for a context-aware menu based on the current file type</p>
</li>
</ul>

<p>You can also open menus through the command palette:</p>

<ol>
<li><p>Press Ctrl+Shift+P (Cmd+Shift+P on Mac)</p>
</li>
<li><p>Type &quot;Scimax: Main Menu&quot; or &quot;Scimax: Show Hydra Menu&quot;</p>
</li>
<li><p>Press Enter</p>
</li>
</ol>

</div>
<div id="org-basic-navigation" class="org-section org-level-2">
<h2>⚠️ Basic Navigation</h2>
<p>When a hydra menu is open:</p>

<ol>
<li><p>Press a single key to execute the corresponding command</p>
</li>
<li><p>Type multiple characters to filter the list</p>
</li>
<li><p>Use arrow keys to navigate</p>
</li>
<li><p>Press Enter to execute the selected command</p>
</li>
<li><p>Press Escape or Backspace (when a parent menu exists) to close or go back</p>
</li>
</ol>

</div>
<div id="org-understanding-exit-behaviors" class="org-section org-level-2">
<h2>⚠️ Understanding Exit Behaviors</h2>
<p>Each menu item has one of three exit behaviors, indicated visually in the interface:</p>

<div id="org-exit-blue-head" class="org-section org-level-3">
<h3>⚠️ Exit (Blue Head)</h3>
<p>The menu closes after executing the command. Most commands use this behavior.</p>

<pre class="example">[t] Today               → Opens today&#39;s journal and closes menu
[s] Search              → Starts search and closes menu</pre>

</div>
<div id="org-stay-red-head-persistent" class="org-section org-level-3">
<h3>⚠️ Stay (Red Head - Persistent)</h3>
<p>The menu remains open after executing the command, allowing you to execute it multiple times or try different commands. These items are marked with a $(sync) icon.</p>

<pre class="example">[r] Refresh $(sync)     → Refreshes data and keeps menu open
[i] Index File $(sync)  → Indexes file and keeps menu open</pre>

</div>
<div id="org-submenu" class="org-section org-level-3">
<h3>⚠️ Submenu</h3>
<p>Navigates to a child menu. These items are marked with a $(chevron-right) icon.</p>

<pre class="example">[j] Journal $(chevron-right)     → Opens journal submenu
[r] References $(chevron-right)  → Opens references submenu</pre>

</div>
</div>
</div>
<div id="org-available-hydras" class="org-section org-level-1">
<h1>⚠️ Available Hydras</h1>
<p>Scimax comes with eight pre-built hydra menus covering all major features:</p>

<div id="org-main-menu-scimax-main" class="org-section org-level-2">
<h2>⚠️ Main Menu (scimax.main)</h2>
<p>The main entry point for all Scimax features.</p>

<pre class="example">Scimax

Features:
  [j] Journal       - Date-based journaling
  [r] References    - Bibliography management
  [n] Notebook      - Project notebooks
  [p] Projects      - Project switching (projectile)

Search &amp; Navigation:
  [s] Search        - Search across files
  [g] Jump (Avy)    - Quick navigation

Database:
  [d] Database      - Org database operations</pre>

</div>
<div id="org-journal-menu-scimax-journal" class="org-section org-level-2">
<h2>⚠️ Journal Menu (scimax.journal)</h2>
<p>Date-based journaling commands for creating and navigating entries.</p>

<pre class="example">Journal

Open Entry:
  [t] Today           - Open today&#39;s journal entry
  [y] Yesterday       - Open yesterday&#39;s entry
  [w] Tomorrow        - Open tomorrow&#39;s entry
  [g] Go to Date      - Open entry for specific date

Navigation:
  [p] Previous Entry  - Navigate to previous entry
  [n] Next Entry      - Navigate to next entry
  [v] Week View       - View entries for the week

Create &amp; Search:
  [c] New Entry       - Create new entry with template
  [s] Search          - Search journal entries

Insert:
  [h] Insert Heading  - Insert timestamped heading</pre>

<ol>
<li><p>Press Ctrl+C M to open main menu</p>
</li>
<li><p>Press j to open journal menu</p>
</li>
<li><p>Press t to open today&#39;s entry</p>
</li>
</ol>

</div>
<div id="org-references-menu-scimax-references" class="org-section org-level-2">
<h2>⚠️ References Menu (scimax.references)</h2>
<p>Bibliography and citation management powered by org-ref.</p>

<pre class="example">References

Citations:
  [c] Insert Citation - Search and insert a citation
  [o] Open Entry      - Open a bibliography entry
  [u] Open URL        - Open URL for reference

Add References:
  [d] Fetch from DOI    - Add entry from DOI
  [b] Fetch from BibTeX - Add entry from BibTeX string
  [n] New Entry         - Create new bibliography entry

Search:
  [s] Search References - Search bibliography
  [w] Citing Works      - Find works citing this reference
  [r] Related Works     - Find related works

Citation Actions:
  [a] Citation Actions  - Actions for citation at point

Management:
  [l] Reload Bibliography - Reload all bibliography files</pre>

<ol>
<li><p>Press Ctrl+C M, then r to open references menu</p>
</li>
<li><p>Press c to insert a citation</p>
</li>
<li><p>Search for your reference and select it</p>
</li>
</ol>

</div>
<div id="org-notebook-menu-scimax-notebook" class="org-section org-level-2">
<h2>⚠️ Notebook Menu (scimax.notebook)</h2>
<p>Project-based organization for scientific computing.</p>

<pre class="example">Notebook

Navigation:
  [o] Open Notebook   - Open an existing notebook
  [l] List Notebooks  - Show all notebooks

Create:
  [n] New Notebook  - Create a new notebook
  [e] New Entry     - Add entry to current notebook

Search:
  [s] Search Notebook - Search within current notebook

Files:
  [f] Open File      - Open file from notebook
  [r] Recent Files   - Show recent notebook files</pre>

<ol>
<li><p>Press Ctrl+C M, then n to open notebook menu</p>
</li>
<li><p>Press n to create a new notebook</p>
</li>
<li><p>Enter notebook name and location</p>
</li>
</ol>

</div>
<div id="org-projectile-menu-scimax-projectile" class="org-section org-level-2">
<h2>⚠️ Projectile Menu (scimax.projectile)</h2>
<p>Project management and switching inspired by Emacs projectile.</p>

<pre class="example">Projects (Projectile)

Switch:
  [p] Switch Project  - Switch to another project

Manage:
  [a] Add Project       - Add current folder as project
  [r] Remove Project    - Remove a project from list
  [s] Scan for Projects - Scan directories for projects

Files:
  [f] Find File         - Find file in project
  [g] Search in Project - Search text in project</pre>

<ol>
<li><p>Press Ctrl+C M, then p to open projectile menu</p>
</li>
<li><p>Press p again to switch to another project</p>
</li>
<li><p>Select project from the list</p>
</li>
</ol>

</div>
<div id="org-search-menu-scimax-search" class="org-section org-level-2">
<h2>⚠️ Search Menu (scimax.search)</h2>
<p>Comprehensive search across files and content.</p>

<pre class="example">Search

Fuzzy Search:
  [f] Search Current File - Fuzzy search in current file
  [o] Search Open Files   - Search across all open files
  [h] Search Headings     - Search headings in current file

Database Search:
  [s] Full-text Search  - Search all indexed content
  [v] Vector Search     - Semantic similarity search

Tasks &amp; Agenda:
  [t] Search TODOs  - Find TODO items
  [a] Agenda        - View agenda items</pre>

<ol>
<li><p>Press Ctrl+C M, then s to open search menu</p>
</li>
<li><p>Press f to search current file</p>
</li>
<li><p>Type your search query</p>
</li>
</ol>

</div>
<div id="org-jump-menu-scimax-jump" class="org-section org-level-2">
<h2>⚠️ Jump Menu (scimax.jump)</h2>
<p>Avy-style quick navigation for jumping to visible text.</p>

<pre class="example">Jump (Avy)

Jump to Character:
  [c] Jump to Char    - Jump to a character
  [2] Jump to 2 Chars - Jump to two characters

Jump to Word:
  [w] Jump to Word - Jump to start of word

Jump to Line:
  [l] Jump to Line  - Jump to a line
  [a] Jump Above    - Jump to line above cursor
  [b] Jump Below    - Jump to line below cursor</pre>

<ol>
<li><p>Press Ctrl+C M, then g to open jump menu</p>
</li>
<li><p>Press w to jump to a word</p>
</li>
<li><p>Type the first letter of target word</p>
</li>
<li><p>Type the hint character shown at that location</p>
</li>
</ol>

</div>
<div id="org-database-menu-scimax-database" class="org-section org-level-2">
<h2>⚠️ Database Menu (scimax.database)</h2>
<p>Org database operations including search and indexing.</p>

<pre class="example">Database

Search:
  [s] Full-text Search  - Search all content
  [v] Vector Search     - Semantic similarity search
  [h] Search Headings   - Search by heading text

Tasks:
  [t] Search TODOs  - Find TODO items
  [a] Agenda        - View scheduled items

Links:
  [l] Search Links  - Find org links
  [b] Backlinks     - Find backlinks to current file

Index:
  [i] Index Current File  - Re-index the current file
  [I] Index All Files     - Re-index all files

Statistics:
  [S] Database Stats  - Show database statistics</pre>

<ol>
<li><p>Press Ctrl+C M, then d to open database menu</p>
</li>
<li><p>Press s to perform full-text search</p>
</li>
<li><p>Enter your search query</p>
</li>
</ol>

</div>
</div>
<div id="org-commands-and-keybindings" class="org-section org-level-1">
<h1>⚠️ Commands and Keybindings</h1>
<div id="org-global-keybindings" class="org-section org-level-2">
<h2>⚠️ Global Keybindings</h2>
<table class="org-table">
<thead>
<tr><th>Keybinding</th><th>Command</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Ctrl+C M</td><td>scimax.hydra.main</td><td>Open main menu</td></tr>
<tr><td>Ctrl+C Ctrl+M</td><td>scimax.hydra.contextMenu</td><td>Open context-aware menu</td></tr>
</tbody>
</table>

</div>
<div id="org-available-commands" class="org-section org-level-2">
<h2>⚠️ Available Commands</h2>
<p>All hydra commands can be invoked through the command palette (Ctrl+Shift+P):</p>

<div id="org-scimax-hydra-show" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.show</h3>
<p>Show a specific hydra menu by ID. If no ID is provided, shows a picker to select from available menus.</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">// Show main menu
await vscode.commands.executeCommand(&#39;scimax.hydra.show&#39;, &#39;scimax.main&#39;);

// Show menu picker
await vscode.commands.executeCommand(&#39;scimax.hydra.show&#39;);</code></pre>
</div>

</div>
<div id="org-scimax-hydra-hide" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.hide</h3>
<p>Hide the currently visible hydra menu.</p>

</div>
<div id="org-scimax-hydra-back" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.back</h3>
<p>Navigate back to the parent menu. If there&#39;s no parent, closes the menu.</p>

</div>
<div id="org-scimax-hydra-main" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.main</h3>
<p>Open the main Scimax menu (scimax.main).</p>

</div>
<div id="org-scimax-hydra-contextmenu" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.contextMenu</h3>
<p>Open a context-aware menu based on the current file type. Falls back to the main menu if no language-specific menu exists.</p>

</div>
<div id="org-scimax-hydra-toggle" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.toggle</h3>
<p>Toggle visibility of a specific menu.</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">await vscode.commands.executeCommand(&#39;scimax.hydra.toggle&#39;, &#39;scimax.journal&#39;);</code></pre>
</div>

</div>
</div>
</div>
<div id="org-configuration" class="org-section org-level-1">
<h1>⚠️ Configuration</h1>
<div id="org-settings" class="org-section org-level-2">
<h2>⚠️ Settings</h2>
<p>Configure hydra behavior through VS Code settings (File &gt; Preferences &gt; Settings or Ctrl+,):</p>

<div id="org-scimax-hydra-showkeyhints" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.showKeyHints</h3>
<p>Show keyboard shortcuts inline with menu items.</p>

<ul>
<li><p>Type: boolean</p>
</li>
<li><p>Default: true</p>
</li>
</ul>

<p>When enabled, shows shortcuts like [t] before each menu item:</p>

<pre class="example">[t] Today           - With key hints
Today               - Without key hints</pre>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;scimax.hydra.showKeyHints&quot;: true
}</code></pre>
</div>

</div>
<div id="org-scimax-hydra-singlekeyselection" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.singleKeySelection</h3>
<p>Select menu items with a single keypress (no Enter needed).</p>

<ul>
<li><p>Type: boolean</p>
</li>
<li><p>Default: true</p>
</li>
</ul>

<p>When enabled, pressing a key immediately executes the command. When disabled, you must press Enter after selecting.</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;scimax.hydra.singleKeySelection&quot;: true
}</code></pre>
</div>

</div>
<div id="org-scimax-hydra-dimnonmatching" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.dimNonMatching</h3>
<p>Dim menu items that don&#39;t match the current filter.</p>

<ul>
<li><p>Type: boolean</p>
</li>
<li><p>Default: true</p>
</li>
</ul>

<p>When typing to filter, non-matching items are dimmed rather than hidden.</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;scimax.hydra.dimNonMatching&quot;: true
}</code></pre>
</div>

</div>
<div id="org-scimax-hydra-sortbykey" class="org-section org-level-3">
<h3>⚠️ scimax.hydra.sortByKey</h3>
<p>Sort menu items by their keyboard shortcut instead of definition order.</p>

<ul>
<li><p>Type: boolean</p>
</li>
<li><p>Default: false</p>
</li>
</ul>

<p>When enabled, items are alphabetically sorted by key (a, b, c...) rather than their logical grouping.</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;scimax.hydra.sortByKey&quot;: false
}</code></pre>
</div>

</div>
</div>
<div id="org-example-configuration" class="org-section org-level-2">
<h2>⚠️ Example Configuration</h2>
<p>A complete hydra configuration might look like:</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;scimax.hydra.showKeyHints&quot;: true,
  &quot;scimax.hydra.singleKeySelection&quot;: true,
  &quot;scimax.hydra.dimNonMatching&quot;: true,
  &quot;scimax.hydra.sortByKey&quot;: false
}</code></pre>
</div>

</div>
</div>
<div id="org-creating-custom-hydras" class="org-section org-level-1">
<h1>⚠️ Creating Custom Hydras</h1>
<p>You can create custom hydra menus programmatically in extension code or through configuration.</p>

<div id="org-menu-structure" class="org-section org-level-2">
<h2>⚠️ Menu Structure</h2>
<p>A hydra menu definition consists of:</p>

<ul>
<li><p>Unique ID</p>
</li>
<li><p>Title and optional hint text</p>
</li>
<li><p>Groups of menu items</p>
</li>
<li><p>Optional parent menu for hierarchical navigation</p>
</li>
<li><p>Optional lifecycle hooks</p>
</li>
</ul>

</div>
<div id="org-using-the-fluent-builder-api" class="org-section org-level-2">
<h2>⚠️ Using the Fluent Builder API</h2>
<p>The easiest way to create a custom menu is with the fluent builder:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">import { HydraManager } from &#39;./hydra&#39;;

// Get the hydra manager instance
const hydraManager = getHydraManager();

// Build a custom menu
const menu = hydraManager.createMenuBuilder(&#39;my.custom.menu&#39;)
    .title(&#39;My Custom Menu&#39;)
    .hint(&#39;Press a key to select an action&#39;)
    .command(&#39;a&#39;, &#39;Action A&#39;, &#39;my.command.a&#39;)
    .persistentCommand(&#39;r&#39;, &#39;Refresh&#39;, &#39;my.command.refresh&#39;)
    .submenu(&#39;s&#39;, &#39;Settings&#39;, &#39;my.settings.menu&#39;)
    .parent(&#39;scimax.main&#39;)
    .build();

// Register the menu
hydraManager.registerMenu(menu);</code></pre>
</div>

</div>
<div id="org-menu-item-types" class="org-section org-level-2">
<h2>⚠️ Menu Item Types</h2>
<div id="org-exit-commands-blue-heads" class="org-section org-level-3">
<h3>⚠️ Exit Commands (Blue Heads)</h3>
<p>Close the menu after executing:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">.command(&#39;t&#39;, &#39;Today&#39;, &#39;scimax.journal.today&#39;)</code></pre>
</div>

</div>
<div id="org-persistent-commands-red-heads" class="org-section org-level-3">
<h3>⚠️ Persistent Commands (Red Heads)</h3>
<p>Keep the menu open after executing:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">.persistentCommand(&#39;r&#39;, &#39;Refresh&#39;, &#39;my.refresh.command&#39;)</code></pre>
</div>

</div>
<div id="org-submenu-links" class="org-section org-level-3">
<h3>⚠️ Submenu Links</h3>
<p>Navigate to a child menu:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">.submenu(&#39;j&#39;, &#39;Journal&#39;, &#39;scimax.journal&#39;)</code></pre>
</div>

</div>
</div>
<div id="org-manual-menu-definition" class="org-section org-level-2">
<h2>⚠️ Manual Menu Definition</h2>
<p>For more control, you can define menus manually:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">import { HydraMenuDefinition } from &#39;./hydra/types&#39;;

const customMenu: HydraMenuDefinition = {
    id: &#39;my.custom&#39;,
    title: &#39;Custom Menu&#39;,
    hint: &#39;My custom commands&#39;,
    parent: &#39;scimax.main&#39;,
    groups: [
        {
            title: &#39;Actions&#39;,
            items: [
                {
                    key: &#39;a&#39;,
                    label: &#39;Action A&#39;,
                    description: &#39;Performs action A&#39;,
                    icon: &#39;zap&#39;,
                    exit: &#39;exit&#39;,
                    action: &#39;my.command.a&#39;
                },
                {
                    key: &#39;b&#39;,
                    label: &#39;Action B&#39;,
                    exit: &#39;stay&#39;,
                    action: async () =&gt; {
                        // Custom async function
                        await performActionB();
                    }
                }
            ]
        },
        {
            title: &#39;Navigation&#39;,
            items: [
                {
                    key: &#39;s&#39;,
                    label: &#39;Settings&#39;,
                    exit: &#39;submenu&#39;,
                    action: &#39;my.settings.menu&#39;
                }
            ]
        }
    ]
};

hydraManager.registerMenu(customMenu);</code></pre>
</div>

</div>
<div id="org-advanced-features" class="org-section org-level-2">
<h2>⚠️ Advanced Features</h2>
<div id="org-conditional-visibility" class="org-section org-level-3">
<h3>⚠️ Conditional Visibility</h3>
<p>Show items only when certain conditions are met:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">{
    key: &#39;x&#39;,
    label: &#39;Advanced Feature&#39;,
    exit: &#39;exit&#39;,
    action: &#39;my.advanced.command&#39;,
    when: () =&gt; {
        const config = vscode.workspace.getConfiguration(&#39;myext&#39;);
        return config.get(&#39;enableAdvanced&#39;, false);
    }
}</code></pre>
</div>

</div>
<div id="org-toggle-items" class="org-section org-level-3">
<h3>⚠️ Toggle Items</h3>
<p>Display on/off state for toggle commands:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">{
    key: &#39;t&#39;,
    label: &#39;Auto Save&#39;,
    exit: &#39;stay&#39;,
    action: &#39;my.toggle.autosave&#39;,
    isToggle: true,
    getToggleState: async () =&gt; {
        const config = vscode.workspace.getConfiguration(&#39;myext&#39;);
        return config.get(&#39;autoSave&#39;, false);
    }
}</code></pre>
</div>

<p>Toggle items display $(check) when on and $(circle-outline) when off.</p>

</div>
<div id="org-lifecycle-hooks" class="org-section org-level-3">
<h3>⚠️ Lifecycle Hooks</h3>
<p>Execute code when menus are shown or hidden:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">const menu: HydraMenuDefinition = {
    id: &#39;my.menu&#39;,
    title: &#39;My Menu&#39;,
    groups: [],
    onShow: async () =&gt; {
        console.log(&#39;Menu opened&#39;);
        await refreshData();
    },
    onHide: async () =&gt; {
        console.log(&#39;Menu closed&#39;);
        await cleanup();
    }
};</code></pre>
</div>

</div>
</div>
<div id="org-registering-multiple-menus" class="org-section org-level-2">
<h2>⚠️ Registering Multiple Menus</h2>
<p>Register several menus at once:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">const menus = [menu1, menu2, menu3];
hydraManager.registerMenus(menus);</code></pre>
</div>

</div>
<div id="org-unregistering-menus" class="org-section org-level-2">
<h2>⚠️ Unregistering Menus</h2>
<p>Remove a menu from the registry:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">hydraManager.unregisterMenu(&#39;my.custom.menu&#39;);</code></pre>
</div>

</div>
</div>
<div id="org-practical-examples" class="org-section org-level-1">
<h1>⚠️ Practical Examples</h1>
<div id="org-example-1-opening-today-s-journal" class="org-section org-level-2">
<h2>⚠️ Example 1: Opening Today&#39;s Journal</h2>
<p>The quickest way to open today&#39;s journal entry:</p>

<ol>
<li><p>Press Ctrl+C M → opens main menu</p>
</li>
<li><p>Press j → opens journal submenu</p>
</li>
<li><p>Press t → opens today&#39;s entry and closes menu</p>
</li>
</ol>

<p>Or, if you remember the keybinding, press Ctrl+Shift+J directly.</p>

</div>
<div id="org-example-2-inserting-a-citation" class="org-section org-level-2">
<h2>⚠️ Example 2: Inserting a Citation</h2>
<p>To insert a citation in your document:</p>

<ol>
<li><p>Position cursor where you want the citation</p>
</li>
<li><p>Press Ctrl+C M → opens main menu</p>
</li>
<li><p>Press r → opens references submenu</p>
</li>
<li><p>Press c → starts citation insertion</p>
</li>
<li><p>Type to search for your reference</p>
</li>
<li><p>Select the reference to insert it</p>
</li>
</ol>

</div>
<div id="org-example-3-quick-navigation-with-jump" class="org-section org-level-2">
<h2>⚠️ Example 3: Quick Navigation with Jump</h2>
<p>To jump to a visible word on screen:</p>

<ol>
<li><p>Press Ctrl+C M → opens main menu</p>
</li>
<li><p>Press g → opens jump submenu</p>
</li>
<li><p>Press w → starts word jump mode</p>
</li>
<li><p>Type first letter of target word</p>
</li>
<li><p>Type the hint character shown at target location</p>
</li>
<li><p>Cursor jumps to that word</p>
</li>
</ol>

</div>
<div id="org-example-4-searching-todo-items" class="org-section org-level-2">
<h2>⚠️ Example 4: Searching TODO Items</h2>
<p>To find all TODO items in your org files:</p>

<ol>
<li><p>Press Ctrl+C M → opens main menu</p>
</li>
<li><p>Press s → opens search submenu</p>
</li>
<li><p>Press t → searches for TODO items</p>
</li>
<li><p>View results in quick pick</p>
</li>
<li><p>Select an item to navigate to it</p>
</li>
</ol>

</div>
<div id="org-example-5-persistent-actions" class="org-section org-level-2">
<h2>⚠️ Example 5: Persistent Actions</h2>
<p>To index multiple files in sequence:</p>

<ol>
<li><p>Press Ctrl+C M → opens main menu</p>
</li>
<li><p>Press d → opens database submenu</p>
</li>
<li><p>Press i → indexes current file, menu stays open</p>
</li>
<li><p>Switch to another file (menu remains visible)</p>
</li>
<li><p>Press i again → indexes that file</p>
</li>
<li><p>Press Escape when done</p>
</li>
</ol>

</div>
<div id="org-example-6-navigating-back" class="org-section org-level-2">
<h2>⚠️ Example 6: Navigating Back</h2>
<p>When in a deep submenu:</p>

<ol>
<li><p>Press Ctrl+C M → main menu</p>
</li>
<li><p>Press d → database menu</p>
</li>
<li><p>Press Backspace or select &quot;Back&quot; → returns to main menu</p>
</li>
<li><p>Press Escape → closes all menus</p>
</li>
</ol>

</div>
</div>
<div id="org-differences-from-emacs-hydra" class="org-section org-level-1">
<h1>⚠️ Differences from Emacs Hydra</h1>
<p>While inspired by Emacs hydra, the VS Code implementation has some differences due to platform constraints and design choices:</p>

<div id="org-similarities" class="org-section org-level-2">
<h2>⚠️ Similarities</h2>
<ul>
<li><p>Keyboard-driven navigation with single-key selection</p>
</li>
<li><p>Persistent menus that stay open for repeated actions</p>
</li>
<li><p>Exit vs. stay behavior (blue vs. red heads)</p>
</li>
<li><p>Hierarchical menu organization</p>
</li>
<li><p>Visual indicators and hints</p>
</li>
</ul>

</div>
<div id="org-differences" class="org-section org-level-2">
<h2>⚠️ Differences</h2>
<div id="org-quick-pick-vs-minibuffer" class="org-section org-level-3">
<h3>⚠️ Quick Pick vs. Minibuffer</h3>
<p>VS Code uses the native quick pick interface instead of Emacs&#39;s minibuffer. This provides:</p>

<ul>
<li><p>Native VS Code look and feel</p>
</li>
<li><p>Fuzzy filtering built-in</p>
</li>
<li><p>Mouse support (if desired)</p>
</li>
<li><p>Icon support</p>
</li>
<li><p>Better accessibility</p>
</li>
</ul>

</div>
<div id="org-no-dedicated-hydra-mode" class="org-section org-level-3">
<h3>⚠️ No Dedicated Hydra Mode</h3>
<p>VS Code doesn&#39;t have a dedicated &quot;hydra mode&quot; like Emacs. Hydras appear as quick picks that temporarily take focus but don&#39;t create a new modal mode.</p>

</div>
<div id="org-async-command-execution" class="org-section org-level-3">
<h3>⚠️ Async Command Execution</h3>
<p>Commands execute asynchronously and can return Promises, supporting VS Code&#39;s async command pattern.</p>

</div>
<div id="org-no-color-customization" class="org-section org-level-3">
<h3>⚠️ No Color Customization</h3>
<p>Unlike Emacs hydra, you cannot customize the colors of menu items. The theme is determined by VS Code&#39;s active color theme.</p>

</div>
<div id="org-menu-state-persistence" class="org-section org-level-3">
<h3>⚠️ Menu State Persistence</h3>
<p>The hydra state is not persisted across VS Code restarts. Each session starts fresh.</p>

</div>
<div id="org-configuration-through-settings" class="org-section org-level-3">
<h3>⚠️ Configuration Through Settings</h3>
<p>Configuration uses VS Code&#39;s settings system (JSON) rather than Emacs Lisp variables.</p>

</div>
<div id="org-no-posframe-support" class="org-section org-level-3">
<h3>⚠️ No Posframe Support</h3>
<p>Menus don&#39;t appear at specific screen positions like Emacs posframe. They always appear in the standard quick pick location (top center).</p>

</div>
</div>
<div id="org-migration-tips" class="org-section org-level-2">
<h2>⚠️ Migration Tips</h2>
<p>If you&#39;re coming from Emacs hydra:</p>

<ol>
<li><p><strong>Keybindings</strong>: Map Ctrl+C M (or your preferred binding) to scimax.hydra.main</p>
</li>
<li><p><strong>Menu Definition</strong>: Use the fluent builder API for a declarative style similar to Emacs</p>
</li>
<li><p><strong>Exit Behavior</strong>: exit = blue head, stay = red head</p>
</li>
<li><p><strong>Submenus</strong>: Use the submenu exit behavior instead of (exit) with another hydra call</p>
</li>
<li><p><strong>Hooks</strong>: Use onShow and onHide instead of :before-exit and :after-exit</p>
</li>
</ol>

</div>
</div>
<div id="org-tips-and-best-practices" class="org-section org-level-1">
<h1>⚠️ Tips and Best Practices</h1>
<div id="org-discoverability" class="org-section org-level-2">
<h2>⚠️ Discoverability</h2>
<ul>
<li><p>Keep menus organized in logical groups</p>
</li>
<li><p>Use descriptive labels and helpful descriptions</p>
</li>
<li><p>Add icons to make items visually distinct</p>
</li>
<li><p>Use consistent key assignments (e.g., s for search, n for new)</p>
</li>
</ul>

</div>
<div id="org-performance" class="org-section org-level-2">
<h2>⚠️ Performance</h2>
<ul>
<li><p>Use conditional visibility (when) to hide irrelevant items</p>
</li>
<li><p>Don&#39;t create too many nested submenus (2-3 levels max)</p>
</li>
<li><p>Keep async actions fast to avoid blocking the UI</p>
</li>
<li><p>Use persistent commands (stay) for repeated actions</p>
</li>
</ul>

</div>
<div id="org-keyboard-shortcuts" class="org-section org-level-2">
<h2>⚠️ Keyboard Shortcuts</h2>
<ul>
<li><p>Assign memorable single-letter keys</p>
</li>
<li><p>Use uppercase for destructive or advanced operations</p>
</li>
<li><p>Group related commands under similar keys across menus</p>
</li>
<li><p>Reserve common keys (q for quit, ? for help, b for back)</p>
</li>
</ul>

</div>
<div id="org-user-experience" class="org-section org-level-2">
<h2>⚠️ User Experience</h2>
<ul>
<li><p>Provide clear hints in menu titles</p>
</li>
<li><p>Show toggle state for boolean options</p>
</li>
<li><p>Use submenus to reduce cognitive load</p>
</li>
<li><p>Test both keyboard and mouse interaction</p>
</li>
<li><p>Ensure menus work in all relevant contexts</p>
</li>
</ul>

</div>
<div id="org-debugging" class="org-section org-level-2">
<h2>⚠️ Debugging</h2>
<p>To debug custom menus:</p>

<ol>
<li><p>Open the Developer Console (Help &gt; Toggle Developer Tools)</p>
</li>
<li><p>Set breakpoints in menu actions</p>
</li>
<li><p>Use console.log in onShow and onHide hooks</p>
</li>
<li><p>Check for errors in command execution</p>
</li>
<li><p>Verify menu registration with hydraManager.getMenuIds()</p>
</li>
</ol>

</div>
</div>
<div id="org-troubleshooting" class="org-section org-level-1">
<h1>⚠️ Troubleshooting</h1>
<div id="org-menu-not-appearing" class="org-section org-level-2">
<h2>⚠️ Menu Not Appearing</h2>
<ul>
<li><p>Verify the menu is registered: Check hydraManager.getMenuIds()</p>
</li>
<li><p>Ensure the menu ID is correct</p>
</li>
<li><p>Check for errors in the Developer Console</p>
</li>
<li><p>Verify keybindings are not conflicting</p>
</li>
</ul>

</div>
<div id="org-commands-not-executing" class="org-section org-level-2">
<h2>⚠️ Commands Not Executing</h2>
<ul>
<li><p>Verify the command is registered in VS Code</p>
</li>
<li><p>Check command arguments are correct</p>
</li>
<li><p>Look for errors in the Developer Console</p>
</li>
<li><p>Test the command directly from command palette</p>
</li>
</ul>

</div>
<div id="org-items-not-showing" class="org-section org-level-2">
<h2>⚠️ Items Not Showing</h2>
<ul>
<li><p>Check the when condition if present</p>
</li>
<li><p>Verify group visibility conditions</p>
</li>
<li><p>Ensure items are not filtered by current search</p>
</li>
<li><p>Check that sortByKey setting isn&#39;t hiding items</p>
</li>
</ul>

</div>
<div id="org-single-key-selection-not-working" class="org-section org-level-2">
<h2>⚠️ Single-Key Selection Not Working</h2>
<ul>
<li><p>Verify scimax.hydra.singleKeySelection is true</p>
</li>
<li><p>Check for key conflicts with other extensions</p>
</li>
<li><p>Ensure the hydra menu has focus</p>
</li>
<li><p>Try pressing keys slowly (avoid double-press)</p>
</li>
</ul>

</div>
<div id="org-submenus-not-navigating" class="org-section org-level-2">
<h2>⚠️ Submenus Not Navigating</h2>
<ul>
<li><p>Verify submenu ID exists and is registered</p>
</li>
<li><p>Check exit is set to &#39;submenu&#39;</p>
</li>
<li><p>Ensure action contains the submenu ID string</p>
</li>
<li><p>Verify parent menu is properly configured</p>
</li>
</ul>

</div>
</div>
<div id="org-frequently-asked-questions" class="org-section org-level-1">
<h1>⚠️ Frequently Asked Questions</h1>
<div id="org-can-i-create-hydras-for-non-scimax-commands" class="org-section org-level-2">
<h2>⚠️ Can I create hydras for non-Scimax commands?</h2>
<p>Yes! You can create hydras that execute any VS Code command, including those from other extensions.</p>

</div>
<div id="org-how-do-i-add-a-hydra-to-the-command-palette" class="org-section org-level-2">
<h2>⚠️ How do I add a hydra to the command palette?</h2>
<p>Hydra commands like scimax.hydra.show are automatically available in the command palette. To show a specific menu, register it first, then call:</p>

<div class="org-src-container">
<pre class="src src-typescript"><code class="language-typescript">await vscode.commands.executeCommand(&#39;scimax.hydra.show&#39;, &#39;your.menu.id&#39;);</code></pre>
</div>

</div>
<div id="org-can-i-bind-a-hydra-to-a-custom-keybinding" class="org-section org-level-2">
<h2>⚠️ Can I bind a hydra to a custom keybinding?</h2>
<p>Yes! Add a keybinding in keybindings.json:</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;key&quot;: &quot;ctrl+alt+h&quot;,
  &quot;command&quot;: &quot;scimax.hydra.show&quot;,
  &quot;args&quot;: &quot;my.custom.menu&quot;
}</code></pre>
</div>

</div>
<div id="org-how-do-i-share-custom-hydras-with-my-team" class="org-section org-level-2">
<h2>⚠️ How do I share custom hydras with my team?</h2>
<p>Custom hydras defined in extension code are automatically shared. For configuration-based hydras, share your workspace .vscode/settings.json file.</p>

</div>
<div id="org-can-hydras-work-with-multiple-workspaces" class="org-section org-level-2">
<h2>⚠️ Can hydras work with multiple workspaces?</h2>
<p>Yes! Hydras are global to the VS Code window and work across all workspace folders.</p>

</div>
<div id="org-how-do-i-disable-hydras" class="org-section org-level-2">
<h2>⚠️ How do I disable hydras?</h2>
<p>Unmap the keybindings in your keybindings.json:</p>

<div class="org-src-container">
<pre class="src src-json"><code class="language-json">{
  &quot;key&quot;: &quot;ctrl+c m&quot;,
  &quot;command&quot;: &quot;-scimax.hydra.main&quot;
}</code></pre>
</div>

<p>The hydras remain available through the command palette.</p>

</div>
</div>
<div id="org-additional-resources" class="org-section org-level-1">
<h1>⚠️ Additional Resources</h1>
<div id="org-source-code" class="org-section org-level-2">
<h2>⚠️ Source Code</h2>
<p>The hydra framework source is located in src<em>hydra</em>:</p>

<ul>
<li><p>src/hydra/types.ts - Type definitions</p>
</li>
<li><p>src/hydra/hydraManager.ts - Core manager implementation</p>
</li>
<li><p>src/hydra/commands.ts - Command registrations</p>
</li>
<li><p>src/hydra<em>menus</em> - Pre-built menu definitions</p>
</li>
</ul>

</div>
<div id="org-related-documentation" class="org-section org-level-2">
<h2>⚠️ Related Documentation</h2>
<ul>
<li><p><a href="keybindings.html">Keybindings</a> - All Scimax keyboard shortcuts</p>
</li>
<li><p><a href="configuration.html">Configuration</a> - Complete settings reference</p>
</li>
<li><p><a href="journal.html">Journal</a> - Journal-specific commands and workflows</p>
</li>
<li><p><a href="references.html">References</a> - Bibliography management</p>
</li>
<li><p><a href="database-search.html">Database Search</a> - Search and query system</p>
</li>
</ul>

</div>
<div id="org-external-references" class="org-section org-level-2">
<h2>⚠️ External References</h2>
<ul>
<li><p><a href="https://github.com/abo-abo/hydra">Emacs Hydra Package</a> - Original inspiration</p>
</li>
<li><p><a href="https://github.com/magit/transient">Emacs Transient Package</a> - Alternative approach</p>
</li>
<li><p><a href="https://code.visualstudio.com/api/references/vscode-api#QuickPick">VS Code QuickPick API</a> - Underlying implementation</p>
</li>
</ul>

</div>
</div>
<div id="org-conclusion" class="org-section org-level-1">
<h1>⚠️ Conclusion</h1>
<p>Hydra menus provide a powerful and discoverable way to access Scimax features. Whether you&#39;re a new user exploring available commands or an experienced user building custom workflows, hydras help you work efficiently without memorizing dozens of keyboard shortcuts.</p>

<p>Start with Ctrl+C M to open the main menu and explore. Over time, you&#39;ll develop muscle memory for frequently-used commands and can invoke them directly or through submenus.</p>

<p>Happy hydra-ing!</p>

</div>
<div id="org-navigation" class="org-section org-level-1">
<h1>Navigation</h1>
<ul>
<li><p>Previous: <a href="navigation.html">Navigation</a></p>
</li>
<li><p>Next: <a href="speed-commands.html">Speed Commands</a></p>
</li>
</ul>

</div>
</main>
</body>
</html>